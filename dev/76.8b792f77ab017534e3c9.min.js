webpackJsonp([76],{2185:function(e,t,r){var o=r(2186);"string"==typeof o&&(o=[[e.i,o,""]]);var n={transform:void 0};r(705)(o,n);o.locals&&(e.exports=o.locals)},2186:function(e,t,r){(e.exports=r(704)(!1)).push([e.i,".projectgroup-container {\n  position: relative;\n}\n.projectgroup-container .opt-btns-wrapper {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.projectgroup-container .filter-conditions-wrapper {\n  margin-bottom: 20px;\n}\n.projectgroup-container .el-dialog__wrapper .el-dialog {\n  width: 500px;\n}\n",""])},339:function(e,t,r){"use strict";var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();r(2185);var n=function(e){return e&&e.__esModule?e:{default:e}}(r(711));function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function o(n,a){try{var i=t[n](a),l=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(l).then(function(e){o("next",e)},function(e){o("throw",e)});e(l)}("next")})}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.pagesBase),o(t,[{key:"complete",value:function(){new Vue({el:"#projectgroup",data:function(){return{categoryList:[],selectedCategory:"1",projectGroupName:"",optTypeText:"",isShowDeletePopover:!1,groupList:[],loading:!1,projectGroupList:[],page:1,pageSize:10,total:0,pageSizeArr:[10,20,50,100],dialogFormVisible:!1,ruleForm:{name:"",category:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],category:[{required:!0,message:"请选择科室类别",trigger:"change"}]}}},computed:{},created:function(){this.categoryList=[{label:"放射科",value:"1"},{label:"病理科",value:"2"},{label:"其他",value:"0"},{label:"测试",value:"3"},{label:"数据库",value:"4"}],this.queryProjectGroupList()},mounted:function(){},methods:{switchCategory:function(){this.projectGroupName="",this.queryProjectGroupList()},handleSizeChange:function(e){this.page=1,this.pageSize=e,this.queryProjectGroupList()},handleCurrentChange:function(e){this.page=e,this.queryProjectGroupList()},queryProjectGroupList:function(){var e=a(regeneratorRuntime.mark(function e(){var t,r,o,a,i,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.default.queryProjectGroupList({category:this.selectedCategory,name:this.projectGroupName,page:this.page,pageSize:this.pageSize});case 2:t=e.sent,r=t.data,o=r.list,a=void 0===o?[]:o,i=r.pages,void 0===i?0:i,l=r.total,u=void 0===l?0:l,this.projectGroupList=a,this.total=u;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),remoteMethod:function(e){var t=this;e?(this.loading=!0,setTimeout(a(regeneratorRuntime.mark(function r(){var o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.default.queryProjectGroupList({category:t.selectedCategory,name:e,page:1});case 2:o=r.sent,a=o.data.list,i=void 0===a?[]:a,t.loading=!1,t.groupList=i;case 6:case"end":return r.stop()}},r,t)})),200)):this.groupList=[]},handleCreate:function(){var e=this;this.optTypeText="创建",this.dialogFormVisible=!0,this.projectGroupId="",this.$nextTick(function(){e.ruleForm=Object.assign({},e.ruleForm,{name:"",category:""}),e.$refs.ruleForm.resetFields()})},handleDelete:function(e){var t=this;this.$confirm("删除该项目群组后，将无法恢复项目与原群组的关联关系。确认删除当前群组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.default.deleteProjectGroup({id:e});case 2:t.$message.success("删除成功"),t.queryProjectGroupList();case 4:case"end":return r.stop()}},r,t)}))).catch(function(){})},handleEdit:function(e){this.optTypeText="编辑";var t=e.id,r=e.name,o=e.category;this.ruleForm=Object.assign({},this.ruleForm,{name:r,category:String(o)}),this.projectGroupId=t,this.dialogFormVisible=!0},handleSave:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=a(regeneratorRuntime.mark(function t(r){var o,a,i,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:if(o=e.ruleForm,a=o.name,i=o.category,l={category:i,name:a},u=void 0,!e.projectGroupId){t.next=12;break}return u="编辑",l.id=e.projectGroupId,t.next=10,n.default.editProjectGroup(l);case 10:t.next=17;break;case 12:return u="创建",e.page=1,e.selectedCategory=i,t.next=17,n.default.createProjectGroup(l);case 17:e.$message.success(u+"成功"),e.dialogFormVisible=!1,e.queryProjectGroupList();case 20:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())}}})}}]),t}();e.exports=i},711:function(e,t,r){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(r(238));var n={baseUrl:function(){return this.app.domain1+"v1"},createProjectGroup:function(e){return o.default.post(this.baseUrl()+"/group/create",e)},deleteProjectGroup:function(e){return o.default.post(this.baseUrl()+"/group/delete",e)},editProjectGroup:function(e){return o.default.post(this.baseUrl()+"/group/edit",e)},queryProjectGroupList:function(e){return o.default.post(this.baseUrl()+"/group/search",e)}};e.exports=n},907:function(e,t){e.exports='<div id=projectgroup class=projectgroup-container> <el-tabs v-model=selectedCategory @tab-click=switchCategory> <el-tab-pane v-for="item in categoryList" :key=item.value :label=item.label :name=item.value></el-tab-pane> </el-tabs> <div class=opt-btns-wrapper> <el-button type=primary size=small @click=queryProjectGroupList>查询</el-button> <el-button size=small @click=handleCreate>创建群组</el-button> </div> <div class=filter-conditions-wrapper> <el-select v-model=projectGroupName filterable clearable remote placeholder=请输入项目群组名称 :remote-method=remoteMethod :loading=loading> <el-option v-for="item in groupList" :key=item.id :label=item.name :value=item.name> </el-option> </el-select> </div> <el-table :data=projectGroupList stripe> <el-table-column prop=id label=项目群组ID></el-table-column> <el-table-column prop=name label=项目群组名称></el-table-column> <el-table-column label=操作> <template slot-scope=scope> <el-button size=mini @click=handleEdit(scope.row)>编辑</el-button> <el-button size=mini type=danger @click=handleDelete(scope.row.id)>删除</el-button> </template> </el-table-column> </el-table> <el-pagination background @size-change=handleSizeChange @current-change=handleCurrentChange :current-page=page :page-sizes=pageSizeArr :page-size=pageSize layout="total, sizes, prev, pager, next, jumper" :total=total></el-pagination> <el-dialog :title="`${optTypeText}项目群组`" :visible.sync=dialogFormVisible :show-close=false> <el-form :model=ruleForm :rules=rules ref=ruleForm label-width=100px> <el-form-item label=名称 prop=name> <el-input v-model=ruleForm.name placeholder=名称不可重复 autocomplete=off></el-input> </el-form-item> <el-form-item label=科室类别 prop=category> <el-select v-model=ruleForm.category placeholder=请选择科室类别> <el-option v-for="item in categoryList" :key=item.value :label=item.label :value=item.value></el-option> </el-select> </el-form-item> </el-form> <div slot=footer class=dialog-footer> <el-button @click="dialogFormVisible = false">取 消</el-button> <el-button type=primary @click=handleSave>确 定</el-button> </div> </el-dialog> </div> '}});