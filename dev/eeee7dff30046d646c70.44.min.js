webpackJsonp([44],{

/***/ 198:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//这边基本上引入需要使用的资源less，api，需要使用的模块等等。

var viewauditres = function (_Interstellar$pagesBa) {
  _inherits(viewauditres, _Interstellar$pagesBa);

  function viewauditres() {
    _classCallCheck(this, viewauditres);

    return _possibleConstructorReturn(this, (viewauditres.__proto__ || Object.getPrototypeOf(viewauditres)).apply(this, arguments));
  }

  _createClass(viewauditres, [{
    key: 'complete',
    value: function complete() {
      var _this2 = this;

      this.styleModel(1);
      this.id = this.app.parpam.id;
      this.total = 0;
      this.render();
      this.resize();

      this.auditproject_read();
      this.model._event._addEvent('querylist.change', _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var temp, res, html;
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                temp = _this2.model.getData('querylist').reset;

                _this2.app.loading.show();
                _context.next = 4;
                return _this2.api.series_result_search(_this2.model.getData('querylist'));

              case 4:
                res = _context.sent;

                _this2.app.loading.hide();
                if (res.code == 0) {
                  _this2.dom.find('.series span').html(parseInt(res.data.auditResultSeriesCount));
                  html = "";

                  res.data.importProjectNameList.forEach(function (val, idx) {
                    html += val + '&nbsp;&nbsp;&nbsp;&nbsp;';
                  });
                  _this2.dom.find('.project span').html(html);
                  _this2.setMain(res, temp);
                }

              case 7:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, _this2);
      })));
    }
  }, {
    key: 'render',
    value: function render() {
      var _this3 = this;

      var that = this;
      this.dom.find('.result').on('click', function () {
        var page = _this3.largeFigure ? 'drapCanvasPro' : 'markauditprojectview';
        window.location.href = 'http://' + window.location.host + '/#!/' + page + '/' + _this3.app.parpam['id'] + '/' + _this3.total + '_0_' + encodeURIComponent(JSON.stringify(_this3.model.querylist)) + '/check_viewer_all';
        window.location.reload();
      });
      this.dom.find('.export').on('click', function () {
        var json = {
          projectId: _this3.id
        };
        var url = _this3.app.domain1 + 'v1/audit/project/series/result/export?param=' + encodeURIComponent(JSON.stringify(json));
        Tool.downfile(url, _this3.app);
      });
      this.dom.find('.search').on('click', function () {
        if (_this3.model.querylist['compareSymbol'] && !/^[0-9]\d*$/.test(_this3.model.querylist['imageTotalCount'])) {
          _this3.dom.find('.number').css({
            'border': '1px solid red'
          });
        } else if (!_this3.model.querylist['compareSymbol'] && _this3.model.querylist['imageTotalCount']) {
          _this3.model.querylist.imageTotalCount = null;
          _this3.dom.find('.number').val('');
        } else {
          _this3.dom.find('.number').css({
            'border': '1px solid #e8e8e8'
          });
          _this3.model.setData('querylist', _this3.model.querylist);
        }
      });
      this.dom.find('.number').on('change', function () {
        that.model.querylist['imageTotalCount'] = ES.selctorDoc(this).val() == '' ? null : ES.selctorDoc(this).val();
      });
      __webpack_require__.e/* require.ensure */(52/* duplicate */).then((function () {
        var dropdown = __webpack_require__(638);
        _this3.symbol = _this3.app.loadModule(dropdown, _this3.dom.find('.symbol'), {
          className: 'xlk',
          firstSelect: {
            val: '',
            idx: ''
          },
          data: [{
            val: '大于',
            idx: '2'
          }, {
            val: '等于',
            idx: '1'
          }, {
            val: '小于',
            idx: '3'
          }]
        });
        _this3.symbol.event._addEvent('option.click', function (value) {
          _this3.model.querylist['compareSymbol'] = parseInt(value.idx);
        });
        _this3.symbol.event._addEvent('dropDown.clear', function (value) {
          delete _this3.model.querylist['compareSymbol'];
          _this3.dom.find('.number').val('');
          delete _this3.model.querylist['imageTotalCount'];
        });
      }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
    }
    // /viewauditres/778

  }, {
    key: 'setTitle',
    value: function setTitle() {
      var _this4 = this;

      var obj = {};
      this.model.listheader.tablewidth = ES.selctorDoc('.viewauditres').box().clientWidth - 40;
      var page = this.largeFigure ? 'drapCanvasPro' : 'markauditprojectview';
      __webpack_require__.e/* require.ensure */(53/* duplicate */).then((function () {
        var cont_table = __webpack_require__(640);
        _this4.table = _this4.app.loadModule(cont_table, _this4.dom.find('.tablearea'), {
          id: 'tablearea',
          header: _this4.model.listheader
        });
        // taskId
        _this4.table.event._addEvent('table.action', function (value) {
          window.location.href = 'http://' + window.location.host + '/#!/' + page + '/' + _this4.app.parpam['id'] + '/' + value.id + '/check_viewer';
          window.location.reload();
        });
        _this4.table.event._addEvent('table.pagenumber', function (value) {
          var json = _this4.model.getData('querylist');
          json.reset = false;
          json.page = parseInt(value);
          _this4.model.setData('querylist', json);
        });
        _this4.table.event._addEvent('table.pagesize', function (value) {
          var json = _this4.model.getData('querylist');
          json.page = 1;
          json.pageSize = value.num;
          json.reset = true;
          _this4.model.setData('querylist', json);
        });
        _this4.dom.find('.list-content').removeClass('hide');
        _this4.model.setData('querylist', {
          projectId: parseInt(_this4.id),
          page: 1,
          pageSize: 10,
          reset: true
        });
        _this4.resize();
      }).bind(null, __webpack_require__)).catch(__webpack_require__.oe);
    }
  }, {
    key: 'setMain',
    value: function setMain(res, bool) {
      var _this5 = this;

      var data2 = [];
      if (res.code == 0) {
        if (res.data.list) {
          this.total = res.data.total;
          res.data.list.forEach(function (val, idx) {
            for (var i in val) {
              val[i] = val[i] == null ? '' : val[i];
            }
            val.id = val.seriesInstanceUid + '_' + val.sarId;
            val.operation = _this5.model.listicon.action;
          });
          this.table.setData(res.data.list);
        } else {
          this.table.noData();
        }
      }
      if (bool) {
        this.table.getTotal(res.data.pages, 2, res.data.total);
      }
      this.initscroll();
    }
  }, {
    key: 'auditproject_read',
    value: function () {
      var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
        var res;
        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.api.auditproject_read({ auditProjectId: this.id });

              case 2:
                res = _context2.sent;

                this.largeFigure = res.data.largeFigure;
                this.setTitle();

              case 5:
              case 'end':
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function auditproject_read() {
        return _ref2.apply(this, arguments);
      }

      return auditproject_read;
    }()
  }, {
    key: 'initscroll',
    value: function initscroll() {
      if (this.myScroll) {
        this.myScroll.refresh();
        return;
      }
      var rid = 'aaa_' + Math.floor(new Date().getTime() * Math.random());
      this.dom.find('.viewauditres .maintable').attr('id', rid);
      this.myScroll = new IScroll('#' + rid, {
        scrollbars: true,
        mouseWheel: true,
        interactiveScrollbars: true,
        hideScrollbar: false,
        vScrollbar: true,
        shrinkScrollbars: 'scale',
        fadeScrollbars: false,
        disableMouse: true,
        disablePointer: true
      });
    }
  }, {
    key: 'resize',
    value: function resize() {
      var ch = ES.selctorDoc(window).box().clientHeight;
      var cw = ES.selctorDoc(window).box().clientWidth - 40;
      ES.selctorDoc('.viewauditres').css({
        'height': ch - 100,
        'width': cw
      });
      this.dom.find('.viewauditres .maintable').css({ 'height': ch - 350, 'width': cw });
    }
  }]);

  return viewauditres;
}(Interstellar.pagesBase);

module.exports = viewauditres;

/***/ }),

/***/ 567:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(959);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(471)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./viewauditres.less", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./viewauditres.less");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 568:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var urlDict = {
  series_result_search: '/audit/project/series/result/search',
  auditproject_read: '/audit/project/read'
};
var api = {
  series_result_search: function series_result_search(value) {
    return this.HttpRequest.POST(urlDict.series_result_search, value);
  },
  auditproject_read: function auditproject_read(value) {
    return this.HttpRequest.POST(urlDict.auditproject_read, value);
  }

};
module.exports = api;

/***/ }),

/***/ 569:
/***/ (function(module, exports) {

module.exports = "<div class=viewauditres> <div class=toparea> <p class=title>查看审核结果</p> <div class=project> <label>包含所属项目：</label> <span></span> </div> <div class=series> <label>共有审核结果序列：</label> <span></span> <label>个</label> </div> <a class=\"biaozhubtn result\">进入查询结果</a> <a class=\"biaozhubtn search\">查询</a> <br> <div class=bznum> <label>病灶数量</label> <div class=symbol></div> <input class=number type=text /> </div> <a class=\"biaozhubtn export\">导出</a> </div> <div class=tablearea></div> </div>";

/***/ }),

/***/ 570:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//这边基本上引入需要使用的资源less，api，需要使用的模块等等。

var viewauditres = function (_Interstellar$modelBa) {
    _inherits(viewauditres, _Interstellar$modelBa);

    function viewauditres(app) {
        _classCallCheck(this, viewauditres);

        var _this = _possibleConstructorReturn(this, (viewauditres.__proto__ || Object.getPrototypeOf(viewauditres)).call(this, app));

        _this.tempquery = {};
        _this.apidata = { page: 1, pageSize: 10 };
        _this.listheader = {
            icon: {
                "seriesInstanceUid": { name: '<span>序列名称</span>', type: 'text', code: 'checkid', w: '25%', ww: '25%', n: "40" },
                "imageTotalCount": { name: '<span>病灶数量</span>', type: 'text', code: 'pid', w: '15%', ww: '15%' },
                "isTrueImageTotalCount": { name: '<span>正确病灶数</span>', type: 'text', code: 'pname', w: '20%', ww: '20%' },
                "isFalseImageTotalCount": { name: '<span>错误病灶数</span>', type: 'text', code: 'psex', w: '20%', ww: '20%' },
                "operation": { name: '<span>操作</span>', type: 'action', code: 'action', w: '20%', ww: '20%' }
            },
            type: 'center'
        };
        _this.listicon = {
            action: {
                view: { dis: 'inline', link: 'noLink', content: '查看' }
            }
        };
        return _this;
    }

    return viewauditres;
}(Interstellar.modelBase);

module.exports = viewauditres;

/***/ }),

/***/ 959:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(470)(false);
// imports


// module
exports.push([module.i, ".viewauditres {\n  margin: 20px;\n  background: #fff;\n  font-size: 14px;\n}\n.viewauditres .toparea {\n  border-bottom: 1px solid #e8e8e8;\n  padding-left: 20px;\n  padding-bottom: 20px;\n}\n.viewauditres .toparea p {\n  height: 60px;\n  line-height: 60px;\n  font-size: 20px;\n}\n.viewauditres .toparea .biaozhubtn {\n  background: #4c9fa9;\n  color: #fff;\n  padding: 0 20px;\n  height: 40px;\n  line-height: 40px;\n  float: right;\n  margin-right: 20px;\n}\n.viewauditres .toparea > div {\n  display: inline-block;\n  margin-top: 10px;\n  line-height: 40px;\n}\n.viewauditres .toparea .project {\n  width: 50%;\n  overflow: hidden;\n}\n.viewauditres .toparea .series {\n  overflow: hidden;\n}\n.viewauditres .toparea .bznum > div {\n  display: inline-block;\n}\n.viewauditres .toparea .bznum .number {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  height: 35px;\n  line-height: 35px;\n  padding-left: 10px;\n}\n.viewauditres .toparea .bznum .xlk {\n  height: 35px;\n  line-height: 35px;\n}\n.viewauditres .toparea .bznum .xlk .nowname {\n  width: 88%;\n}\n.viewauditres .tablearea .maintable {\n  overflow: hidden;\n}\n", ""]);

// exports


/***/ })

});
//# sourceMappingURL=eeee7dff30046d646c70.44.min.js.map