webpackJsonp([58],{

/***/ 814:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

__webpack_require__(896);

var menutree = function (_Interstellar$moduleB) {
    _inherits(menutree, _Interstellar$moduleB);

    function menutree(app, dom, value, addMode) {
        _classCallCheck(this, menutree);

        var _this = _possibleConstructorReturn(this, (menutree.__proto__ || Object.getPrototypeOf(menutree)).call(this, app, dom, value, addMode));

        _this.html = __webpack_require__(898);
        _this.name = "menutree";
        return _this;
    }

    _createClass(menutree, [{
        key: "complete",
        value: function complete() {
            this.myScroll = null;
        }
    }, {
        key: "changeMenu",
        value: function changeMenu(value, type) {
            //console.log(value,'value1111111')
            var _Object = this;
            var menudata = void 0;
            var html1 = '';
            menudata = value;
            _Object.dom.find('.treeArea').html('');
            if (type == 'single') {
                menudata.forEach(function (val, i) {
                    var tempdata = '';
                    _Object.nowParam.config.forEach(function (v, idx) {
                        tempdata += val[v] + ',';
                    });
                    html1 += '<li class="navFirst" did="' + val.id + '" config="' + tempdata + '">\n' + '<i class="iconfont icon-yonghu"></i>\n' + '                <span  title="' + val.name + '">' + val.name + '</span></li>';
                });
            } else {
                var level2 = [];
                var html2 = '';
                var root = { "root": [] };
                menudata.root.forEach(function (val, i) {
                    var temp = menudata.root[i].id;
                    if (menudata[temp]) {
                        html1 += '<li class="navFirst" did="' + val.id + '">\n' + '<i class="iconfont icon-keshi"></i>\n' + '                <span title="' + val.name + '">' + val.name + '</span>\n' + '                <i class="xiala"></i>\n' + '                <ul class="erji hide">';
                    } else {
                        html1 += '<li class="navFirst" did="' + val.id + '">\n' + '<i class="iconfont icon-keshi"></i>\n' + '                <span  title="' + val.name + '">' + val.name + '</span>\n' + '                <ul class="erji hide">';
                    }

                    if (menudata[temp]) {
                        menudata[temp].forEach(function (value, idx) {
                            html1 += '<li class="navSecond" did="' + value.id + '">\n' + '                        <span  title="' + value.name + '">' + value.name + '</span>\n' + '                        <i class="iconfont icon-caozuo"></i>\n' + '                    </li>';
                        });
                    }
                    html1 += '</ul></li>';
                });
            }

            _Object.dom.find('.treeArea').html(html1);
            _Object.resize(ES.selctorDoc('.menutree').box().clientHeight);
            _Object.addBtn();
            // _Object.dom.find('.navFirst').eq(0).click()
            // if (value) {
            //     _Object.dom.find('.navFirst').dom.forEach(function(val, idx) {
            //         if (ES.selctorDoc(val).dom.attr('did') == value) {
            //             ES.selctorDoc(val).dom.find('.xiala').click();
            //         }
            //     })
            // }
        }
    }, {
        key: "addBtn",
        value: function addBtn() {
            var _Object = this;
            _Object.dom.find('.navSecond i').on('click', function () {
                var edit = _Object.app.languageMode.getTranslate(_Object.app.language, 'menutree', 'edit');
                var delete1 = _Object.app.languageMode.getTranslate(_Object.app.language, 'menutree', 'delete');
                console.log(delete1, 'delete1');
                var did = ES.selctorDoc(this).parent().attr('did');
                var html = '<div class="groupaction top">\n' + '<span class="edit">' + edit + '</span>\n' + '<span class="delete">' + delete1 + '</span>\n' + '</div>';
                var dom = ES.selctorDoc(this).parent();
                console.log(_Object.dom.find('.groupaction').dom);
                if (dom.find('.groupaction').dom == undefined) {
                    if (_Object.dom.find('.groupaction').dom) {
                        _Object.dom.find('.groupaction').remove();
                    }
                    dom.append(html);
                    _Object.dom.find('.groupaction .edit').on('click', function (e) {
                        e.stopPropagation();
                        // let modal2;
                        var id = ES.selctorDoc(this).parent().parent().attr('did');
                        _Object.modal2 = _Object.app.loadModal(modal1, {
                            adv: true
                        }, ES.selctorDoc(this).parent().parent().firstchildren('span').html());
                        _Object.modal2.changeTitle(_Object.app.languageMode.getTranslate(_Object.app.language, 'addgroup', 'bjfz'));
                        _Object.dom.find('.groupaction').remove();
                        _Object.modal2.event._addEvent('addUser.info', function (value) {
                            // modal2.close()
                            _Object.event._dispatch('editUser.info1', { name: value, depart: id });
                        });
                    });
                    _Object.dom.find('.groupaction .delete').on('click', function (e) {
                        e.stopPropagation();
                        var id = ES.selctorDoc(this).parent().parent().attr('did');
                        var scfz = _Object.app.languageMode.getTranslate(_Object.app.language, 'alert', 'scfz');
                        _Object.app.alert.show({
                            title: '',
                            template: '<span style="font-size: 18px;margin-left:20px;color: #333333;font-family: "MicrosoftYaHei"">' + scfz + '</span>',
                            close: true,
                            resetBtn: '90px',
                            sure: function sure() {
                                _Object.event._dispatch('alert.confirm', id);
                            }
                        });
                        _Object.dom.find('.groupaction').remove();
                    });
                } else {
                    dom.find('.groupaction').remove();
                }
            });
            _Object.dom.find('.navSecond').on('click', function (e) {
                e.stopPropagation();
                _Object.dom.find('.navSecond').removeClass('choosed');
                ES.selctorDoc(this).addClass('choosed');
                _Object.dom.find('.navFirst').removeClass('choosedks');
                ES.selctorDoc(this).parent().parent().addClass('choosedks');
                _Object.event._dispatch('navSecond.choosed', { name: ES.selctorDoc(this).firstchildren('span').html(), id: ES.selctorDoc(this).attr('did'), dom: ES.selctorDoc(this) });
            });
            _Object.dom.find('.navFirst').on('click', function () {
                _Object.dom.find('.navFirst').removeClass('choosedks');
                _Object.dom.find('.navSecond').removeClass('choosed');
                _Object.dom.find('.erji').addClass('hide');
                if (_Object.dom.find('.groupaction').dom) {
                    _Object.dom.find('.groupaction').remove();
                }
                if (!ES.selctorDoc(this).hasClass('choosedsk')) {
                    ES.selctorDoc(this).addClass('choosedks');
                    _Object.event._dispatch('navFirst.choosed', { name: ES.selctorDoc(this).firstchildren('span').html(), id: ES.selctorDoc(this).attr('did'), config: ES.selctorDoc(this).attr('config') });
                }
            });
            _Object.dom.find('.xiala').on('click', function (e) {
                e.stopPropagation();
                _Object.dom.find('.navFirst').removeClass('choosedks');
                _Object.dom.find('.navSecond').removeClass('choosed');
                var dom = ES.selctorDoc(this).parent().find('ul');
                if (dom.hasClass('hide')) {
                    _Object.dom.find('.erji').addClass('hide');
                    dom.removeClass('hide');
                    //ES.selctorDoc(this).parent().click();
                    _Object.event._dispatch('navFirst.choosed', { name: ES.selctorDoc(this).parent().firstchildren('span').html(), id: ES.selctorDoc(this).parent().attr('did') });
                    ES.selctorDoc(this).parent().addClass('choosedks');
                } else {
                    dom.addClass('hide');
                }
                _Object.initscrollmenu();
            });
        }
    }, {
        key: "resize",
        value: function resize(value) {
            console.log(value, 'valuewwe');
            this.dom.find('.srocll').css({ 'height': value - 58 });
            this.dom.find('.menutree').css({ 'height': value });
            this.initscrollmenu();
        }
    }, {
        key: "initscrollmenu",
        value: function initscrollmenu() {
            if (this.myScroll) {
                this.myScroll.refresh();
                return;
            }
            var rid = 'aaa_' + Math.floor(new Date().getTime() * Math.random());
            this.dom.find('.menutree .srocll').attr('id', rid);
            this.myScroll = new IScroll('#' + rid, {
                scrollbars: true,
                mouseWheel: true,
                interactiveScrollbars: true,
                hideScrollbar: false,
                vScrollbar: true,
                shrinkScrollbars: 'scale',
                fadeScrollbars: false,
                disableMouse: true,
                disablePointer: true
            });
        }
    }, {
        key: "modal2Close",
        value: function modal2Close() {
            this.modal2.close();
        }
    }]);

    return menutree;
}(Interstellar.moduleBase);

//原型链一定要有的


module.exports = menutree;

/***/ }),

/***/ 896:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(897);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(471)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./menutree.less", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./menutree.less");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 897:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(470)(false);
// imports


// module
exports.push([module.i, ".menutree {\n  height: 100%;\n  position: relative;\n}\n.menutree .srocll {\n  overflow: hidden;\n  position: relative;\n}\n.menutree .treeArea {\n  background: white;\n  color: #333333;\n  font-size: 14px;\n  text-align: center;\n  padding-bottom: 80px;\n}\n.menutree .treeArea .navFirst {\n  display: inline-block;\n  width: 100%;\n  text-align: left;\n  height: 48px;\n  line-height: 48px;\n  cursor: pointer;\n}\n.menutree .treeArea .navFirst .icon-keshi {\n  margin-left: 24px;\n  font-size: 14px;\n}\n.menutree .treeArea .navFirst .xiala {\n  background: url(/images/page/login_down.png);\n  height: 7px;\n  width: 12px;\n  display: inline-block;\n  margin: 0 6px;\n  margin-bottom: 2px;\n  cursor: pointer;\n}\n.menutree .treeArea .navFirst > span {\n  margin-left: 6px;\n  color: #333;\n  width: 74px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.menutree .treeArea .choosedks {\n  color: #448E97;\n}\n.menutree .treeArea .choosedks span {\n  color: #448E97;\n}\n.menutree .treeArea .erji {\n  width: 100%;\n}\n.menutree .treeArea .erji .navSecond {\n  height: 36px;\n  line-height: 36px;\n  width: 100%;\n  background: #fff;\n  position: relative;\n  cursor: pointer;\n}\n.menutree .treeArea .erji .navSecond > span {\n  margin-left: 44px;\n  font-family: MicrosoftYaHei;\n  font-size: 12px;\n  color: #151515;\n  letter-spacing: 0;\n  width: 74px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  white-space: nowrap;\n}\n.menutree .treeArea .erji .navSecond:hover {\n  background: #FAFAFA;\n}\n.menutree .treeArea .erji .navSecond i {\n  font-size: 12px;\n  margin-left: 12px;\n}\n.menutree .treeArea .erji .choosed {\n  background: #ECF3F4;\n}\n.menutree .treeArea .flTitle-selected a {\n  border-left: solid 1px #fff;\n  border-right: solid 1px #fff;\n}\n.menutree .treeArea .navTwo {\n  position: absolute;\n  top: 49px;\n  left: 0;\n  width: 140px;\n  text-align: center;\n  background: #161b62;\n  opacity: 0.8;\n  border-radius: 5px;\n}\n.menutree .treeArea .navTwo a {\n  display: block;\n}\n.menutree .treeArea .navTwo a:hover {\n  color: #3F82C5;\n}\n.menutree .treeArea .navThree {\n  position: absolute;\n  left: 139px;\n  top: 0px;\n  width: 125px;\n  background: #303087;\n  border-radius: 5px;\n}\n.menutree .bread {\n  background: #fff;\n}\n.menutree .user {\n  display: inline-block;\n  height: 46px;\n  line-height: 46px;\n  float: right;\n  position: relative;\n  cursor: pointer;\n  font-size: 11px;\n}\n.menutree .user .arrow {\n  position: absolute;\n  display: inline-block;\n  height: 10px;\n  width: 10px;\n  top: 17px;\n  right: 10px;\n  background: url(/images/arrow.png) no-repeat;\n  background-position: -3px -2px;\n}\n.menutree .user .account {\n  margin-right: 27px;\n}\n.menutree .user .selections {\n  width: 80px;\n  position: absolute;\n  top: 36px;\n  right: 1px;\n  z-index: 1;\n  line-height: 26px;\n  text-align: center;\n  background: #ffffff;\n  border: 1px solid #dddddd;\n  border-radius: 10px;\n  box-shadow: 0 0 5px #ccc;\n}\n.menutree .user .selections a {\n  display: block;\n  margin: 0px 10px;\n  border-bottom: 1px solid #dddddd;\n  color: #000;\n  height: 33px;\n  line-height: 33px;\n}\n.menutree .user .selections a:hover {\n  cursor: pointer;\n  color: #000;\n}\n.menutree .addteam {\n  height: 57px;\n  width: 100%;\n  line-height: 57px;\n  text-align: center;\n  position: absolute;\n  bottom: 0px;\n  border-top: 1px  solid #e8e8e8;\n}\n.menutree .addteam .addteam1 {\n  font-family: \"MicrosoftYaHei\";\n  font-size: 14px;\n  color: #448E97;\n  letter-spacing: 0;\n}\n.menutree .groupaction {\n  position: absolute;\n  width: 88px;\n  border: 1px solid #e8e8e8;\n  z-index: 1000;\n  background: #fff;\n  right: 3px;\n  top: 31px;\n}\n.menutree .groupaction span {\n  width: 100%;\n  height: 36px;\n  text-align: center;\n  cursor: pointer;\n}\n.menutree .groupaction span:hover {\n  background: #ECF3F4;\n}\n.menutree .groupaction:before {\n  z-index: 1000;\n  position: absolute;\n  content: \"\";\n  display: inline-block;\n}\n.menutree .top:before {\n  border-bottom: 6px solid #fff;\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  top: -6px;\n  right: 9px;\n}\n", ""]);

// exports


/***/ }),

/***/ 898:
/***/ (function(module, exports) {

module.exports = "<div class=menutree> <div class=srocll> <ul class=treeArea> </ul> </div> </div>";

/***/ })

});
//# sourceMappingURL=5728a5b61649eeb7cbc1.58.min.js.map