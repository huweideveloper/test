webpackJsonp([6],{112:function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(2018);var i=s(r(241)),o=s(r(65));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.pagesBase),a(t,[{key:"complete",value:function(){this.projectType=-1!==window.location.hash.indexOf("createproone")?1:3,1==this.projectType?this.app.header.openControl("projectmanage"):this.app.header.openControl("backflowproject"),this.app.header.changeselected(1),this.styleModel(1);var e=this.app,t=this;new Vue({el:"#createProStepOne",data:function(){var r=this;return{app:e,projectType:t.projectType,type:e.parpam.type,id:1*e.parpam.projectid,status:parseInt(e.parpam.status),docFileList:[],projectForm:{id:"",name:"",bizFileId:"",remark:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:["blur","change"]},{validator:function(){var e=c(regeneratorRuntime.mark(function e(t,n,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,r.checkNameIsrepeat(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",a(new Error("项目名称已存在")));case 6:a();case 7:case"end":return e.stop()}},e,r)}));return function(t,r,n){return e.apply(this,arguments)}}(),trigger:["blur"]}],remark:[{required:!0,message:"请输入项目描述",trigger:["blur","change"]}]}}},computed:{isView:function(){return"view"===this.type},isStart:function(){return 2===this.status}},watch:{projectForm:{deep:!0,handler:function(e,t){this.setSessionData1(e)}}},mounted:function(){this.initProjectData(),this.queryDocFileList(),this.initEvent()},methods:{initEvent:function(){var e=this;this.app.header.event._addEvent("header.changePageError",function(){e.$refs.proform.validate()})},initProjectData:function(){if(this.id)this.queryProjectDetail();else{var e=this.getSessionData1();this.projectForm=n({},e)}this.$refs.proform.clearValidate()},queryProjectDetail:function(){var e=c(regeneratorRuntime.mark(function e(){var t,r,n,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.projectdetail({id:this.id});case 2:t=e.sent,r=t.data||{},n=r.id,a=r.name,o=r.bizFileId,s=r.remark,this.projectForm={id:n,name:a,bizFileId:o,remark:s},this.setSessionData1(this.projectForm);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),queryDocFileList:function(){var e=c(regeneratorRuntime.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.queryFileList({bizType:"PATHOLOGY_PROJECT",bizName:r});case 2:t=e.sent,this.docFileList=t.data||[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkNameIsrepeat:function(){var e=c(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.isrepeat({name:t,type:this.projectType,useCallerHandler:!0});case 2:return r=e.sent,(a=0!==r.code)&&this.setSessionData1(n({},this.projectForm,{name:""})),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleChangeData:function(){this.app.session.set("ischanged",!0)},setSessionData1:function(e){this.app.session.set("data_1",JSON.stringify(e))},getSessionData1:function(){var e=this.app.session.get("data_1");return e?JSON.parse(e):{id:"",name:"",bizFileId:"",remark:""}}}})}}]),t}();e.exports=l},2018:function(e,t,r){var n=r(2019);"string"==typeof n&&(n=[[e.i,n,""]]);var a={transform:void 0};r(705)(n,a);n.locals&&(e.exports=n.locals)},2019:function(e,t,r){(e.exports=r(704)(!1)).push([e.i,".create-pro-step-one {\n  position: relative;\n  padding: 20px 20px 60px;\n  color: #333;\n  background: #fff;\n}\n.create-pro-step-one .header-title {\n  font-size: 16px;\n  margin-bottom: 20px;\n  padding-left: 10px;\n}\n.create-pro-step-one .header-title .title {\n  margin-bottom: 10px;\n}\n.create-pro-step-one .el-select {\n  width: 100%;\n}\n",""])},241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(65),i=(0,a.generateRequestFn)({projectdetail:"/project/basic/read",isrepeat:"/project/name/exist"}),o=(0,a.generateGetRequestFn)({queryAnnoList:"/image/anno/list"});t.default=n({},i,o)},297:function(e,t){e.exports='<div id=createProStepOne class=create-pro-step-one> <div class=header-title> <h3 class=title>创建项目</h3> <div class=title>第一步：项目基本信息</div> </div> <el-form ref=proform :model=projectForm :rules=rules label-width=150px label-suffix=：> <el-row> <el-col :span=20> <el-form-item label=项目名称 prop=name> <el-input v-model=projectForm.name placeholder=请输入项目名称 :disabled=isView @change=handleChangeData> </el-input> </el-form-item> </el-col> </el-row> <el-row> <el-col :span=20> <el-form-item label=说明文档> <el-select v-model=projectForm.bizFileId placeholder=请选择说明文档 filterable :filter-method=queryDocFileList :disabled=isView @change=handleChangeData clearable> <el-option v-for="item in docFileList" :key=item.id :label=item.bizName :value=item.id></el-option> </el-select> </el-form-item> </el-col> </el-row> <el-row> <el-col :span=20> <el-form-item label=项目描述 prop=remark> <el-input v-model=projectForm.remark type=textarea :rows=4 placeholder=请输入项目描述 :disabled=isView @change=handleChangeData></el-input> </el-form-item> </el-col> </el-row> </el-form> </div> '}});