webpackJsonp([53],{1025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1026),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t.default=a.a},1026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inheritAttrs:!1,props:{minValue:{type:Number},maxValue:{type:Number},value:[String,Number],precision:{type:Number,default:0},maxlength:{type:[Number,String]},negative:{type:Boolean,default:!1}},data:function(){return{textInput:""}},computed:{inputType:function(){return 0===this.precision?"integer":"float"}},methods:{emitEventHandler:function(e){this.$emit.apply(this,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(arguments).slice(1))))},handleInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Number(this.maxlength);t&&e.length>t&&(e=e.slice(0,t)),e=e?e.toString().replace(/^0+(\d+)/g,"$1"):"",this.negative&&(e=e.startsWith("-")?"-"+e.replace(/-/g,""):e.replace(/-/g,""));var n=e.split(".")[1]||"",i=new RegExp("(.+\\.\\d{"+this.precision+"})(.*)$","g"),a=n&&n.length>this.precision?e.replace(i,"$1"):e;this.$emit("input",a)},handleKeyUp:function(e){var t=event.target.value;8===(e.which||e.keyCode)&&(this.textInput=t)},handleChage:function(e){this.$emit("change",e)},handleBlur:function(e){var t=e.target.value;/\.$/.test(t)&&(t=t.replace(/\.$/,""),this.$emit("input",t)),this.$emit("blur",e)},handleKeyPress:function(e){var t=e.key,n=e.target.value;this.textInput=""+(this.textInput||n);var i=["0","1","2","3","4","5","6","7","8","9"],a=[".","Del"];this.negative&&i.push("-"),this.negative&&a.push("-");var r=["Backspace"];if(i.includes(t)||a.includes(t)||r.includes(t)){if("integer"===this.inputType){if(a.includes(t))return void e.preventDefault();n.length}else{if(0===n.length&&!i.includes(t))return void e.preventDefault();if(1!==n.length||"0"!==n||a.includes(t)||r.includes(t)){if(this.textInput.includes(".")&&a.includes(t))return void e.preventDefault();n.split(".")[1]&&n.split(".")[1].length===this.precision&&r.includes(t)}else;}a.includes(t)&&n&&(this.textInput=""+this.textInput+t)}else e.preventDefault()}}}},1178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1179),a=n(1025);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n(1181);var o=n(921),s=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);s.options.__file="app/components/input-number/index.vue",t.default=s.exports},1179:function(e,t,n){"use strict";var i=n(1180);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},1180:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",e._b({staticClass:"input-number-wrapper",attrs:{type:"number",value:e.value,maxlength:e.maxlength},on:{input:e.handleInput,blur:e.handleBlur,change:e.handleChage},nativeOn:{keypress:function(t){return e.handleKeyPress.apply(null,arguments)},mousewheel:function(e){e.preventDefault()},keydown:[function(e){if(!e.type.indexOf("key")&&38!==e.keyCode)return null;e.preventDefault()},function(e){if(!e.type.indexOf("key")&&40!==e.keyCode)return null;e.preventDefault()}],keyup:function(t){return e.handleKeyUp.apply(null,arguments)}}},"el-input",e.$attrs,!1),[n("template",{slot:"append"},[e._t("append")],2),e._v(" "),e._t("default")],2)},a=[];i._withStripped=!0},1181:function(e,t,n){"use strict";var i=n(1182);n.n(i)},1182:function(e,t,n){var i=n(1183);"string"==typeof i&&(i=[[e.i,i,""]]);var a={transform:void 0};n(705)(i,a);i.locals&&(e.exports=i.locals)},1183:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,".input-number-wrapper input[type='number'] {\n  -moz-appearance: textfield;\n}\n.input-number-wrapper input::-webkit-outer-spin-button,\n.input-number-wrapper input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\n",""])},1874:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1178));n(1875);var r=function(e){function t(e,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,a,r));return o.html=n(1877),o.name="bztoolli",o.data=a,o.status=o.data.status||o.app.parpam.status||1,o.vuePage=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.moduleBase),i(t,[{key:"complete",value:function(){this.initVuePage("#company"+this.data.num)}},{key:"initVuePage",value:function(e){var t=this;this.vuePage=new Vue({el:e,components:{InputNumber:a.default},data:function(){return{status:Number(t.status),companyarr:[],dataNum:t.data.num,previous:t.data.previous,actionType:t.nowParam.type||"",choosedUser:[],form:{venderId:"",userList:[],cost:"",costVisible:!1},firstRender:!0,venderList:[],userSelectList:[],isDisabled:!1,isLast:!1,rules:{venderId:[{required:!0,message:"请选择所属单位",trigger:["change"]},{validator:function(e,n,i){var a={};t.event._dispatch("companyli.getCompanyarr",a);var r=a.companyarr.filter(function(e){return e.venderId===n});return r&&r.length>1?i(new Error("已选择相同的所属单位")):i()},trigger:["change"]}],userList:[{required:!0,message:"请选择可选名单",trigger:["change"]}],cost:[{required:!0,message:"请输入标注单价",trigger:["blur","change"]}]}}},computed:{costLabel:function(){return"audit"===this.actionType?"审核单价":"标注单价"}},watch:{form:{deep:!0,handler:function(e){return t.event._dispatch("companyli.datachange",{data:e,num:t.data.num})}}},methods:{initFormData:function(e){var n=e.venderId,i=e.userList,a=e.cost,r=e.costVisible,o=i.filter(function(e){return!0===e.selected}).map(function(e){return e.id});this.choosedUser=o,this.form={venderId:n,userList:o,cost:a,costVisible:r},t.event._dispatch("companyli.choosed",{data:{idx:n},num:t.data.num,firstRender:this.firstRender})},initVenderList:function(e){this.venderList=e},initUserSelectList:function(e){this.userSelectList=e},handleVenderIdChange:function(e){this.firstRender=!1,t.event._dispatch("companyli.choosed",{data:{idx:e},num:t.data.num,firstRender:this.firstRender})},handleAdd:function(){t.event._dispatch("companyli.addcompany")},handleDelete:function(){if(this.status>1&&this.previous)return t.app.alert.show({title:" ",msg:"已添加的不能删除",close:!1}),!1;t.event._dispatch("companyli.delete",{num:t.nowParam.num})},handleSubmit:function(){var e=!1;return this.$refs.form.validate(function(t){e=!!t}),e},setIsLast:function(){var e=this.companyarr.length;this.companyarr.forEach(function(t,n){return!t.delete&&(e=n+1)}),this.isLast=e===this.dataNum}}})}},{key:"setdata",value:function(e){this.vuePage.initFormData(e)}},{key:"onCompanyarrChange",value:function(e){this.vuePage.companyarr=e,this.vuePage.setIsLast()}},{key:"renderPeople",value:function(e){var t=this;if(this.vuePage.firstRender){var n=this.vuePage.choosedUser;e.forEach(function(e){e.selected=t.status>1&&n.includes(e.idx)})}else this.vuePage.form.userList=e.map(function(e){return e.idx});this.vuePage.userSelectList=e}},{key:"setxlkvalue",value:function(e){this.vuePage.venderList=e}},{key:"cleardata",value:function(){this.vuePage.venderId=""}},{key:"disabled",value:function(){this.vuePage.isDisabled=!0}},{key:"validate",value:function(){return this.vuePage.handleSubmit()}}]),t}();e.exports=r},1875:function(e,t,n){var i=n(1876);"string"==typeof i&&(i=[[e.i,i,""]]);var a={transform:void 0};n(705)(i,a);i.locals&&(e.exports=i.locals)},1876:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,"#companyli > div {\n  display: inline-block;\n}\n#companyli .action-icon {\n  cursor: pointer;\n}\n#companyli .icon-tianjia {\n  position: relative;\n  left: unset;\n  bottom: unset;\n}\n",""])},1877:function(e,t){e.exports='<div class=companyli> <el-form ref=form :model=form :rules=rules label-width=105px label-suffix=:> <el-row> <el-col :span=7> <el-form-item label=所属单位 prop=venderId> <el-select v-model=form.venderId placeholder=请选择所属单位 clearable @change=handleVenderIdChange style=display:inline-block;width:80% :disabled="(status > 1 && previous) || isDisabled"> <el-option v-for="item in venderList" :key=item.idx :label=item.val :value=item.idx></el-option> </el-select> <template v-if=!isDisabled> <i class="iconfont icon-shanchu action-icon" @click=handleDelete></i> <i v-show=isLast class="iconfont icon-tianjia action-icon" @click=handleAdd></i> </template> </el-form-item> </el-col> <el-col :span=6> <el-form-item label=可选名单 prop=userList> <el-select v-model=form.userList placeholder=请选择可选名单 filterable reserve-keyword multiple=multiple collapse-tags :clearable="status <= 1 || (status > 1 && !previous)" style=display:inline-block;width:75% :disabled=isDisabled> <el-option v-for="item in userSelectList" :key=item.id :label=item.name :value=item.id :disabled=item.selected></el-option> </el-select> <span class=user-count>{{form.userList.length}}人</span> </el-form-item> </el-col> <el-col :span=5> <el-form-item :label=costLabel prop=cost> <input-number class=cost-wrapper v-model.trim=form.cost autocomplete=off :precision=2 :placeholder=costLabel style=width:90% :clearable="status <= 1 || (status > 1 && !previous)" :disabled=isDisabled> </input-number> </el-form-item> </el-col> <el-col :span=3 style=line-height:40px> <el-checkbox v-model=form.costVisible :disabled=isDisabled>价格是否可见</el-checkbox> </el-col> </el-row> </el-form> </div> '},2150:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2151);var a=function(e){function t(e,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,a,r));return o.html=n(2153),o.name="distrubution",o.data=a,o.companys={},o.apidata={venderAssignList:[],costVisible:!1},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.moduleBase),i(t,[{key:"complete",value:function(){var e=this;this.loadModule(),e.companyli=n(1874),e.dom.find(".icon-tianjia").on("click",function(){e.companyarr.push({venderId:"",cost:"",costVisible:!1}),e.apidata.venderAssignList=e.companyarr.filter(function(e){return!0!==e.delete}),e.event._dispatch("distrubution.datachange",e.apidata),e.addcompanyli()}),e.dom.find(".kfsarea .check-box").on("click",function(){"view"!=e.type&&(ES.selctorDoc(this).hasClass("choose")?(ES.selctorDoc(this).removeClass("choose"),e.apidata.costVisible=!1):(ES.selctorDoc(this).addClass("choose"),e.apidata.costVisible=!0),e.event._dispatch("distrubution.datachange",e.apidata))}),e.dom.find(".kfsarea .cost").on("change",function(){"view"!=e.type&&(e.apidata.cost=ES.selctorDoc(this).val(),e.event._dispatch("distrubution.datachange",e.apidata))})}},{key:"loadModule",value:function(){var e=this;e.dropobj={};var t=[{className:"kxlk",name:"method",firstSelect:{val:"请选择任务方式",idx:""},data:[{val:"承包式",idx:1},{val:"开放式",idx:2}]},{className:"xlk",name:"assignMethod",firstSelect:{val:"请选择任务分配方式",idx:""},data:[{val:"抢单式",idx:2}]}];n.e(82).then(function(){var i=n(919);t.forEach(function(t,n){var a=e.app.loadModule(i,e.dom.find("."+t.name),{className:t.className,firstSelect:t.firstSelect,data:t.data,input:t.input});a.event._addEvent("option.click",function(n){e.apidata[t.name]=parseInt(n.idx),e.event._dispatch("distrubution.datachange",e.apidata)}),a.event._addEvent("dropDown.clear",function(n){e.apidata[t.name]="",e.event._dispatch("distrubution.datachange",e.apidata)}),e.dropobj[t.name]=a}),e.dropobj.method.event._addEvent("option.click",function(t){e.dom.find(".rwfsarea").addClass("hide"),e.apidata.method=parseInt(t.idx),e.companyarr=[],"1"==t.idx?(e.dom.find(".cbsarea").removeClass("hide"),0==e.companyarr.length&&(e.companyarr.push({venderId:"",cost:"",costVisible:""}),e.dom.find(".companys").remove(),e.addcompanyli())):"2"==t.idx&&e.dom.find(".kfsarea").removeClass("hide"),e.apidata.venderAssignList=e.companyarr.filter(function(e){return!0!==e.delete}),e.event._dispatch("distrubution.datachange",e.apidata)})}.bind(null,n)).catch(n.oe)}},{key:"setTotalNum",value:function(e){this.dom.find(".kfsarea .people").html(e)}},{key:"renderPeople",value:function(e,t){this.companys[t].renderPeople(e)}},{key:"setxlkvalue",value:function(e){for(var t in this.allcompany=e,this.companys)this.companys[t].setxlkvalue(e)}},{key:"showloading",value:function(e){for(var t in this.companys)this.companys[t].loading(e)}},{key:"validateCompanyli",value:function(){if(1==this.apidata.method){var e=this.companys,t=void 0===e?{}:e,n=this.companyarr,i=void 0===n?[]:n;if(!Object.values(t).every(function(e,t){return!!i[t].delete||e.validate()}))return!1}return!0}},{key:"addcompanyli",value:function(e){var t=this,n=this;n.dom.find(".cbsarea").append('<li id="company'+this.companyarr.length+'" class="companys company'+this.companyarr.length+'" previous="'+!!e+'"></li>');var i=n.app.loadModule(n.companyli,n.dom.find(".company"+this.companyarr.length),{num:this.companyarr.length,type:"audit",previous:!!e});i.setxlkvalue(this.allcompany),i.event._addEvent("companyli.getCompanyarr",function(e){e.companyarr=t.companyarr||[]}),i.event._addEvent("companyli.addcompany",function(e){n.companyarr.push({venderId:"",cost:"",costVisible:!1}),n.apidata.venderAssignList=n.companyarr.filter(function(e){return!0!==e.delete}),n.event._dispatch("distrubution.datachange",n.apidata),n.addcompanyli()}),i.event._addEvent("companyli.choosed",function(e){n.event._dispatch("distrubution.queryPeople",e),n.apidata.venderAssignList.forEach(function(t,n){t.venderId==parseInt(e.data.idx)&&n!==e.num-1&&i.cleardata()})}),i.event._addEvent("companyli.datachange",function(e){n.companyarr[e.num-1]=e.data,n.apidata.venderAssignList=n.companyarr.filter(function(e){return!0!==e.delete}),n.event._dispatch("distrubution.datachange",n.apidata)}),i.event._addEvent("companyli.delete",function(e){1!==n.dom.find(".companys").dom.length?(n.companyarr[e.num-1].delete=!0,n.apidata.venderAssignList=n.companyarr.filter(function(e){return!0!==e.delete}),n.event._dispatch("distrubution.datachange",n.apidata),n.dom.find(".company"+e.num).remove(),Object.values(n.companys).forEach(function(e){return e.onCompanyarrChange(n.companyarr)})):n.app.alert.show({title:" ",msg:"只剩一行不能再删了",close:!1})}),i.event._addEvent("companyli.cominput",function(e){n.event._dispatch("distrubution.cominput",{data:e,dom:i})}),n.companys[n.companyarr.length]=i,n.event._dispatch("distrubution.datachange",n.apidata),e&&i.setdata(e),Object.values(n.companys).forEach(function(e){return e.onCompanyarrChange(n.companyarr)})}},{key:"setData",value:function(e){var t=this;t.dom.find(".apidata[api=cost]").val(e.data.cost),t.apidata.cost=e.data.cost,e.data.costVisible&&t.dom.find(".kfsarea .check-box").addClass("choose"),t.dom.find('.method .option[data-idx="'+e.data.method+'"]').click(),t.dom.find('.assignMethod .option[data-idx="'+e.data.assignMethod+'"]').click(),e.data.venderAssignList&&(t.companyarr=[],t.dom.find(".companys").remove(),e.data.venderAssignList.forEach(function(e,n){t.companyarr.push(e),t.addcompanyli(e,n)}),t.apidata.venderAssignList=t.companyarr)}},{key:"disable",value:function(){for(var e in this.dom.find(".kfsarea .check-box").off("click"),this.dropobj)this.dropobj[e].disable()}}]),t}();e.exports=a},2151:function(e,t,n){var i=n(2152);"string"==typeof i&&(i=[[e.i,i,""]]);var a={transform:void 0};n(705)(i,a);i.locals&&(e.exports=i.locals)},2152:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,".distrubution {\n  min-height: 200px;\n}\n.distrubution .inputLine {\n  width: auto;\n  white-space: nowrap;\n  position: relative;\n  margin: 10px 0;\n  display: inline-block;\n}\n.distrubution .inputLine > div {\n  display: inline-block;\n}\n.distrubution .inputLine > input {\n  border-radius: 4px;\n  border: 1px solid #e8e8e8;\n  height: 40px;\n  width: 300px;\n  line-height: 40px;\n  background: #fff;\n}\n.distrubution .inputLine .sel,\n.distrubution .inputLine .enddate {\n  display: inline-block;\n}\n.distrubution .inputLine .marknum {\n  display: inline-block;\n  width: 90px;\n}\n.distrubution .inputLine .tips {\n  position: absolute;\n  left: 140px;\n  font-size: 12px;\n}\n.distrubution .inputLine .tips a {\n  color: #448e97;\n}\n.distrubution .inputLine .tips i {\n  font-size: 12px;\n  color: #448e97;\n}\n.distrubution .inputLine .enddate,\n.distrubution .inputLine .startdate {\n  width: 170px;\n  height: 40px;\n  line-height: 40px;\n  margin-right: 268px;\n}\n.distrubution .inputLine .enddate .showData,\n.distrubution .inputLine .startdate .showData {\n  border-radius: 4px;\n}\n.distrubution .inputLine .xlk {\n  height: 40px;\n  line-height: 40px;\n  width: 200px;\n}\n.distrubution .inputLine .xlk .selected1 span {\n  color: #666;\n}\n.distrubution .inputLine .kxlk {\n  height: 40px;\n  line-height: 40px;\n  width: 300px;\n  position: relative;\n}\n.distrubution .inputLine .kxlk .selected1 span {\n  color: #666;\n}\n.distrubution .inputLine .kxlk .selected1 .nowname {\n  line-height: 40px;\n}\n.distrubution .inputLine .method {\n  margin-right: 138px;\n}\n.distrubution .kfsarea {\n  padding: 20px;\n}\n.distrubution .kfsarea > p {\n  display: inline-block;\n  margin: 0 86px;\n}\n.distrubution .kfsarea > p input {\n  height: 40px;\n  line-height: 40px;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 130px;\n}\n.distrubution .cbsarea {\n  position: relative;\n}\n.distrubution .cbsarea .icon-tianjia {\n  color: #4c9fa9;\n  cursor: pointer;\n}\n.distrubution .cbsarea .companys {\n  margin-top: 10px;\n}\n",""])},2153:function(e,t){e.exports='<div class=distrubution> <div class=inputLine redlabel=kxlk> <span class=w180><label class=redstar>*</label>任务方式：</span> <div class=method check=empty></div> </div> <div class=inputLine redlabel=xlk> <span class=w135><label class=redstar>*</label>任务分配方式：</span> <div class=assignMethod check=empty></div> </div> <br> <ul class="cbsarea rwfsarea hide"> </ul> <div class="kfsarea rwfsarea hide"> <p>共<label class=people></label>人可参与审核</p> <div class=inputLine redlabel=inputBox> <span><label class=redstar>*</label>审核单价：</span> <input type=text class="inputBox cost apidata" check=empty|num reg=/^(?!(0[0-9]{0,}$))[0-9]{1,}[.]{0,}[0-9]{0,}$/ api=cost /> </div> <p><i class=check-box></i>价格是否可见</p> </div> </div> '},2154:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,".createaudittask3 {\n  min-height: 538px;\n  background: #fff;\n  font-size: 14px;\n  overflow: hidden;\n  border: 1px solid #fff;\n  position: relative;\n}\n.createaudittask3 .distrubutionarea {\n  margin-left: 70px;\n  display: inline-block;\n  margin-top: 20px;\n}\n.createaudittask3 .distrubutionarea .people .duoxuanxlk {\n  width: 230px!important;\n}\n.createaudittask3 .distrubutionarea .people .duoxuanxlk .showbox .showname {\n  width: 180px;\n}\n.createaudittask3 .distrubutionarea i.check-box {\n  vertical-align: 0;\n}\n.createaudittask3 .distrubutionarea i.check-box.disabled {\n  cursor: not-allowed;\n}\n.createaudittask3 > .scroll {\n  padding: 20px 0;\n}\n.createaudittask3 > .scroll .save {\n  position: absolute;\n  right: 40px;\n  padding: 0 20px;\n  height: 40px;\n  line-height: 40px;\n  background: #4c9fa9;\n  color: #fff;\n}\n",""])},325:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,r){try{var o=t[a](r),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.pagesBase),i(t,[{key:"complete",value:function(){this.app.header.openControl("audittask"),this.app.header.changeselected(3),this.styleModel(1),this.tUser_count(),this.type=this.app.parpam.type,this.projectid=1*this.app.parpam.projectid,this.taskid=parseInt(this.app.parpam.taskid),this.status=parseInt(this.app.parpam.status),this.apiData={},this.loadmodules(),this.vendor_query(!1,!1,!0),this.eventAdd()}},{key:"loadmodules",value:function(){var e=this,t=n(2150);this.distrubution=this.app.loadModule(t,this.dom.find(".distrubutionarea"),{}),this.distrubution.event._addEvent("distrubution.datachange",function(t){e.app.session.set("ischanged",!0),t.id=e.taskid,t.isBasic=!1,e.apiData=t}),this.distrubution.event._addEvent("distrubution.cominput",function(t){t&&e.vendor_query(t.data.data.data,t.dom)}),this.distrubution.event._addEvent("distrubution.queryPeople",function(t){console.log(t,"fff"),e.user_list(t.data.idx,t.num)})}},{key:"eventAdd",value:function(){var e=this;this.dom.find(".save").on("click",a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dom.find(".inputLine").dom.forEach(function(e,t){e.find("."+e.attr("redlabel")).removeClass("redborder"),e.find(".required").remove(),""!==Tool.checkForm(ES.selctorDoc(e).dom,"red")&&(console.log(e.attr("redlabel")),e.find("."+e.attr("redlabel")).addClass("redborder"),e.find("."+e.attr("redlabel")).after('<span class="required">'+Tool.checkForm(ES.selctorDoc(e).dom,"red")+"</span>"))}),e.distrubution.validateCompanyli()){t.next=4;break}return t.abrupt("return");case 4:if(!e.dom.find(".redborder").dom||!e.dom.find(".redborder").dom.some(function(e){return 0!==e.box().clientHeight})){t.next=8;break}return t.abrupt("return",!1);case 8:return e.app.loading.show(),t.next=11,e.api.audit_task_update(e.apiData);case 11:n=t.sent,e.app.loading.hide(),0==n.code?(e.app.session.clearAll(),e.app.alert.show({title:" ",msg:"编辑成功",close:!1})):e.errorshow(n.msg);case 14:case"end":return t.stop()}},t,e)})))}},{key:"tUser_count",value:function(){var e=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.user_count({hasAudit:!0,taskType:2});case 2:0==(t=e.sent).code?this.distrubution.setTotalNum(t.data.count):this.errorshow(t.msg);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"user_list",value:function(){var e=a(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.user_list({venderId:1*t,taskType:2});case 2:(i=e.sent).data.list.forEach(function(e){e.idx=e.id,e.val=e.name+"("+e.mobile+")"}),this.distrubution.renderPeople(i.data.list,n);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"vendor_query",value:function(){var e=a(regeneratorRuntime.mark(function e(t,n,i){var a,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.companydata=[],a={},t&&(a.name=t),n&&n.gsxlk.loading(!0),e.next=6,this.api.vendor_audit_query(a);case 6:0==(r=e.sent).code?(r.data.list.forEach(function(e,t){var n={idx:e.id,val:e.name};o.companydata.push(n)}),n?(n.gsxlk.loading(!1),n.setxlkvalue(this.companydata)):(this.distrubution.setxlkvalue(this.companydata),i&&this.render())):this.errorshow(r.msg);case 8:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"errorshow",value:function(e){this.app.alert.show({title:" ",msg:e,close:!1})}},{key:"render",value:function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n={id:this.taskid},this.app.loading.show(),e.next=5,this.api.audit_task_read(n);case 5:i=e.sent,this.app.loading.hide(),0==i.code?t=i.data:this.errorshow(i.msg),this.proname=t.name,this.model.setData("apiData",t),this.distrubution.setData(i),"view"!=this.type&&1===this.status||(this.dom.find(".apidata").attr("readonly","readonly"),2===t.method&&this.dom.find(".save").remove(),this.distrubution.disable(),this.apiData.editTaskUser=!0),this.app.session.clearAll();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}();e.exports=r},832:function(e,t,n){var i=n(2154);"string"==typeof i&&(i=[[e.i,i,""]]);var a={transform:void 0};n(705)(i,a);i.locals&&(e.exports=i.locals)},833:function(e,t,n){"use strict";var i="/audit/task/read",a="/audit/task/update",r="/vendor/query",o="/user/annoable/count",s="/vendor/user/list",u={audit_task_read:function(e){return this.HttpRequest.POST(i,e)},audit_task_update:function(e){return this.HttpRequest.POST(a,e)},vendor_audit_query:function(e){return this.HttpRequest.POST(r,e)},user_count:function(e){return this.HttpRequest.POST(o,e)},user_list:function(e){return this.HttpRequest.POST(s,e)}};e.exports=u},834:function(e,t){e.exports='<div class=createaudittask3> <div class=scroll> <div class=distrubutionarea></div> <a class="biaozhubtn save">保存</a> </div> </div> '},835:function(e,t,n){"use strict";var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.modality={},n.ytjcomplist={},n.componentdata={},n.apiData={modality:"",seriesList:[],annotationItemList:[],imageAnnotationList:[],cacheNumber:"",discurdIdList:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.modelBase),t}();e.exports=i},921:function(e,t,n){"use strict";t.a=function(e,t,n,i,a,r,o,s){var u,d="function"==typeof e?e.options:e;t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0);i&&(d.functional=!0);r&&(d._scopeId="data-v-"+r);o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=u):a&&(u=s?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a);if(u)if(d.functional){d._injectStyles=u;var l=d.render;d.render=function(e,t){return u.call(t),l(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,u):[u]}return{exports:e,options:d}}}});