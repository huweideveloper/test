webpackJsonp([41],{

/***/ 162:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//这边基本上引入需要使用的资源less，api，需要使用的模块等等。

__webpack_require__(472);

var personalaccount = function (_Interstellar$pagesBa) {
  _inherits(personalaccount, _Interstellar$pagesBa);

  function personalaccount() {
    _classCallCheck(this, personalaccount);

    return _possibleConstructorReturn(this, (personalaccount.__proto__ || Object.getPrototypeOf(personalaccount)).apply(this, arguments));
  }

  _createClass(personalaccount, [{
    key: 'complete',
    value: function complete() {
      // this.app.header.showcrube();
      this.resize();
      this.styleModel(1);
      // this.type = 'doctor';
      this.useinfo = JSON.parse(this.app.local.get('all'));
      this.dom.find('.username').html(this.useinfo.name);
      this.dom.find('.usertime').html(this.useinfo.usedTime);
      this.model.data.userId = this.useinfo.userId;
      this.app.loading.show();
      this.loadData();
    }
  }, {
    key: 'loadData',
    value: function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
        var _this2 = this;

        var value, subName, completedTasks;
        return regeneratorRuntime.wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.api.task_current({ userId: this.useinfo.userId });

              case 2:
                value = _context.sent;

                this.app.loading.hide();
                if (value.data.id) {
                  if (value.data.seriesAnnotationResultId || value.data.seriesAvailableNum * 1 != 0) {
                    this.dom.find('.jxztask').removeClass('hide');
                    this.dom.find('.jxztask .taskname').html(value.data.name);
                    subName = value.data.seriesAnnotationResultId ? "<span style='color:#999;'> (名下存在未提交序列)</span>" : "";

                    this.dom.find('.jxztask .starttime').html("剩余可分配数量：" + value.data.seriesAvailableNum + subName);
                    this.dom.find('.jxztask .endtime').html('到期：' + Tool.time(value.data.endTime, 'yyyy-mm-dd'));
                    this.dom.find('.jxztask').on('click', function () {
                      _this2.app.changePage('taskdetail', { taskId: value.data.id, type: "editor" });
                    });
                  }
                } else {
                  this.dom.find('.getnewtask').removeClass('hide');
                  this.dom.find('.getnewtask').on('click', function () {
                    _this2.app.changePage('alltasklist');
                  });
                }
                _context.next = 7;
                return this.api.task_completed(this.model.getData('data'));

              case 7:
                completedTasks = _context.sent;

                this.setData(completedTasks.data);
                // this.initscroll('tasklistarea');
                this.initscroll('personalaccount');

              case 10:
              case 'end':
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function loadData() {
        return _ref.apply(this, arguments);
      }

      return loadData;
    }()
  }, {
    key: 'setData',
    value: function setData(value) {
      var _this3 = this;

      var donetask = __webpack_require__(892);
      var donetasklist = this.app.loadModule(donetask, this.dom.find('.donetasklist'), { 'selected': 'account' });
      donetasklist.setData(value);
      donetasklist.event._addEvent('donetask.click', function (res) {
        _this3.app.changePage('taskdetail', { taskId: res.taskId, type: "view" });
        //window.location.href='http://'+window.location.host+'/#!/mark/'+res.taskId+'/'+res.projectId+'/viewer'
      });
      this.initscroll('personalaccount');
    }
  }, {
    key: 'initscroll',
    value: function initscroll(val) {
      if (this.myScroll) {
        this.myScroll.refresh();
        return;
      }
      var rid = 'aaa_' + Math.floor(new Date().getTime() * Math.random());
      ES.selctorDoc('.' + val).attr('id', rid);
      this.myScroll = new IScroll('#' + rid, {
        scrollbars: true,
        mouseWheel: true,
        interactiveScrollbars: true,
        hideScrollbar: false,
        vScrollbar: true,
        shrinkScrollbars: 'scale',
        fadeScrollbars: false,
        disableMouse: true,
        disablePointer: true
      });
    }
  }, {
    key: 'resize',
    value: function resize() {
      var ch = ES.selctorDoc(window).box().clientHeight - 100;
      var cw = ES.selctorDoc(window).box().clientWidth - 600;
      ES.selctorDoc('.personalaccount').css({ 'height': ch });
      ES.selctorDoc('.donetask').css({ 'width': cw });
    }
  }]);

  return personalaccount;
}(Interstellar.pagesBase);

module.exports = personalaccount;

/***/ }),

/***/ 472:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(823);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(471)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./personalaccount.less", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./personalaccount.less");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 508:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var urlDict = {
  task_completed: '/user/task/completed',
  task_current: '/user/task/current'
};
var api = {
  task_completed: function task_completed(value) {
    return this.HttpRequest.POST(urlDict.task_completed, value);
  },
  task_current: function task_current(value) {
    return this.HttpRequest.POST(urlDict.task_current, value);
  }
};
module.exports = api;

/***/ }),

/***/ 509:
/***/ (function(module, exports) {

module.exports = "<div class=personalaccount> <div class=scroll> <div class=top> <p class=firstline> <span class=username>某某某</span> <span>医生，欢迎登录杏脉标注系统！</span> </p> <p> <span>您已与杏脉医疗合作</span> <span class=usertime>3</span> <span>天，感谢您对人工智能医疗研究的付出</span> </p> </div> <div class=main> <div class=doingtask> <span class=tasktitle>进行中的任务：</span> <div class=\"jxztask hide\"> <p class=tasktitle> <span class=taskname>标注任务1</span> </p> <p class=starttime>当前可标注量：<label></label></p> <p class=endtime>任务结束时间：<label></label></p> </div> <div class=\"getnewtask hide\"> <i class=\"iconfont icon-tianjia\"></i> <p>获取新任务</p> </div> </div> <div class=donetask> <span class=tasktitle>历史任务：</span> <div class=\"nodata hide\"> <img/> </div> <div class=donetasklist></div> </div> </div> </div> </div>";

/***/ }),

/***/ 510:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//这边基本上引入需要使用的资源less，api，需要使用的模块等等。
var PersonAlAccountModel = function (_Interstellar$modelBa) {
    _inherits(PersonAlAccountModel, _Interstellar$modelBa);

    function PersonAlAccountModel(app) {
        _classCallCheck(this, PersonAlAccountModel);

        //taskInfo任务详情
        //userInfo用户信息
        //sequencesInfo序列信息
        var _this = _possibleConstructorReturn(this, (PersonAlAccountModel.__proto__ || Object.getPrototypeOf(PersonAlAccountModel)).call(this, app));

        _this.data = { pageSize: 10, page: 1, keyword: "" };

        return _this;
    }

    return PersonAlAccountModel;
}(Interstellar.modelBase);

module.exports = PersonAlAccountModel;

/***/ }),

/***/ 823:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(470)(false);
// imports


// module
exports.push([module.i, ".personalaccount {\n  background: #f9f9f9;\n  border-top: 1px #f9f9f9 solid;\n  border-bottom: 1px #f9f9f9 solid;\n  margin: 40px;\n}\n.personalaccount .scroll {\n  overflow: hidden;\n}\n.personalaccount .top {\n  font-size: 14px;\n  margin-bottom: 50px;\n}\n.personalaccount .top .firstline {\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 40px;\n}\n.personalaccount .top .errorline {\n  margin-top: 30px;\n}\n.personalaccount .top .errorline a {\n  font-family: MicrosoftYaHei;\n  font-size: 14px;\n  color: #448E97;\n  text-decoration: underline;\n}\n.personalaccount .main {\n  display: flex;\n}\n.personalaccount .main .tasktitle {\n  font-size: 15px;\n  margin-bottom: 10px;\n}\n.personalaccount .main .doingtask {\n  width: 500px;\n}\n.personalaccount .main .doingtask .jxztask {\n  background: #fff;\n  width: 280px;\n  height: 180px;\n  cursor: pointer;\n  border-radius: 2px;\n  margin-bottom: 10px;\n  padding: 0 20px;\n}\n.personalaccount .main .doingtask .jxztask .tasktitle {\n  height: 50px;\n  line-height: 50px;\n  font-size: 16px;\n  margin-bottom: 50px;\n}\n.personalaccount .main .doingtask .jxztask .tasktitle .percent {\n  font-size: 24px;\n  font-weight: bold;\n  float: right;\n}\n.personalaccount .main .doingtask .jxztask .starttime,\n.personalaccount .main .doingtask .jxztask .endtime {\n  margin: 20px 0;\n}\n.personalaccount .main .doingtask .getnewtask {\n  cursor: pointer;\n  width: 320px;\n  height: 140px;\n  background: #fff;\n  color: #CCCCCC;\n  border-radius: 2px;\n  text-align: center;\n  padding-top: 40px;\n}\n.personalaccount .main .doingtask .getnewtask i {\n  font-size: 60px;\n}\n.personalaccount .main .doingtask .getnewtask p {\n  font-size: 14px;\n  margin-top: 10px;\n}\n.personalaccount .main .doingtask .getnewtask:hover {\n  color: #4c9fa9;\n}\n.personalaccount .main .donetask {\n  flex: 1;\n}\n", ""]);

// exports


/***/ }),

/***/ 892:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

__webpack_require__(893);
// var html = require('./tpl.html')

var donetask = function (_Interstellar$moduleB) {
    _inherits(donetask, _Interstellar$moduleB);

    function donetask(app, dom, value, addMode) {
        _classCallCheck(this, donetask);

        var _this = _possibleConstructorReturn(this, (donetask.__proto__ || Object.getPrototypeOf(donetask)).call(this, app, dom, value, addMode));

        _this.html = __webpack_require__(895);
        _this.name = 'donetask';
        //this.flag = true;
        //this.code = "";
        return _this;
    }

    _createClass(donetask, [{
        key: 'complete',
        value: function complete() {}
    }, {
        key: 'setData',
        value: function setData(value) {
            this.render(value);
        }
    }, {
        key: 'render',
        value: function render(value) {
            var that = this;
            this.dom.find('.tasklilist').html('');
            var str = '';
            value.map(function (item) {
                str += '<li taskId="' + item.id + '" pid="' + item.projectId + '">\n            <label class="colortip"></label>\n            <span class="taskname">' + item.name + '</span>\n            <span class="taskdate">' + (item.startTime ? Tool.time(item.startTime, 'yyyy-mm-dd') : item.startTime) + '-' + (item.endTime ? Tool.time(item.endTime, 'yyyy-mm-dd') : item.endTime) + '</span>\n        </li>';
            });
            this.dom.find('.tasklilist').html(str);
            this.dom.find('.tasklilist li').on('click', function () {
                that.event._dispatch('donetask.click', { taskId: ES.selctorDoc(this).attr('taskId'), projectId: ES.selctorDoc(this).attr('pid') });
            });
        }
    }]);

    return donetask;
}(Interstellar.moduleBase);

//原型链一定要有的


module.exports = donetask;

/***/ }),

/***/ 893:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(894);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(471)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./donetask.less", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./donetask.less");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 894:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(470)(false);
// imports


// module
exports.push([module.i, ".donetask {\n  width: 100%;\n}\n.donetask .tasklilist li {\n  cursor: pointer;\n  height: 50px;\n  line-height: 50px;\n  background: #fff;\n  border-radius: 4px;\n  font-size: 15px;\n  position: relative;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #e8e8e8;\n}\n.donetask .tasklilist li .colortip {\n  width: 3px;\n  height: 30px;\n  background: red;\n  display: inline-block;\n  position: absolute;\n  top: 10px;\n}\n.donetask .tasklilist li .fangdatip {\n  height: 130px!important;\n  top: 33px!important;\n}\n.donetask .tasklilist li .taskname {\n  margin-left: 41px;\n}\n.donetask .tasklilist li .taskdate {\n  float: right;\n  margin-right: 30px;\n}\n.donetask .tasklilist li .status {\n  width: 17%;\n}\n.donetask .tasklilist li .price {\n  width: 17%;\n  color: red;\n}\n.donetask .tasklilist li .icon-icon-test3 {\n  font-size: 12px;\n  display: inline-block;\n  transform: rotate(180deg);\n}\n.donetask .tasklilist li .xuanzhuan {\n  transform: rotate(180deg);\n}\n.donetask .tasklilist li .xiangqing {\n  background: #fff;\n  padding: 20px;\n}\n.donetask .tasklilist li .xiangqing p {\n  margin: 0 20px;\n  line-height: 35px;\n}\n.donetask .tasklilist li .xiangqing .lineone span {\n  width: 39%;\n}\n.donetask .tasklilist li .xiangqing .lineone .rwl {\n  width: 20%;\n}\n.donetask .tasklilist li .xiangqing .linetwo .rwkssj {\n  width: 72.4%;\n}\n", ""]);

// exports


/***/ }),

/***/ 895:
/***/ (function(module, exports) {

module.exports = "<div class=donetask> <ul class=tasklilist> <li> <label class=colortip></label> <span class=taskname>肺部CT结节ROI标注</span> <span class=taskdate>2018年8月20日-2018年8月31日</span> </li> </ul> </div> ";

/***/ })

});
//# sourceMappingURL=b1015e72aa8d5efdabed.41.min.js.map