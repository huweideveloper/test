webpackJsonp([57],{

/***/ 751:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

__webpack_require__(866);

var inputarea = function (_Interstellar$moduleB) {
    _inherits(inputarea, _Interstellar$moduleB);

    function inputarea(app, dom, value, addMode) {
        _classCallCheck(this, inputarea);

        var _this = _possibleConstructorReturn(this, (inputarea.__proto__ || Object.getPrototypeOf(inputarea)).call(this, app, dom, value, addMode));

        _this.html = __webpack_require__(868);
        _this.name = "inputarea";
        return _this;
    }

    _createClass(inputarea, [{
        key: 'complete',
        value: function complete() {
            this.bindevent();
            this.type = this.nowParam.type == undefined ? 0 : this.nowParam.type; //type为1时需要用户确认删除
            this.maxshownum = this.nowParam.maxshownum == undefined ? 10 : this.nowParam.maxshownum;
            this.linehigh = this.nowParam.linehigh == undefined ? 30 : this.nowParam.linehigh;
        }
    }, {
        key: 'bindevent',
        value: function bindevent() {
            var that = this;
            that.dom.find('.contentinput').on('input', function () {
                that.event._dispatch('inputarea.input', ES.selctorDoc(this).val());
            });
            that.dom.find('.contentarea').on('click', function (e) {
                e.stopPropagation();
                // that.dom.find('.labelsinput').focus();
                $('.contentinput').focus();
                that.event._dispatch('inputarea.focus');
            });
            that.dom.find('.mask').on('click', function () {
                that.dom.find('.contentul').html('');
                that.dom.find('.inputarea').blur();
                that.dom.find('.ularea').addClass('hide');
                that.dom.find('.mask').addClass('hide');
            });
            // that.dom.find('.contentinput').on('keydown', function(e) {
            //     let keyCode = e.keyCode
            //     if (event.keyCode === 13) {
            //         if (ES.selctorDoc(this).val() != '') {
            //             that.createlabel(ES.selctorDoc(this).val())
            //         }
            //     }
            // })
            // that.dom.find('.inputarea').on('blur', function() {
            //     if (ES.selctorDoc(this).val() != '') {
            //         that.createlabel(ES.selctorDoc(this).val())
            //     }
            // })
        }
    }, {
        key: 'createlabel',
        value: function createlabel(value, value2, bool) {
            var that = this;
            that.dom.find('.mask').addClass('hide');
            that.dom.find('.ularea').addClass('hide');
            that.dom.find('.contentul').html('');
            if (that.dom.find('.chooseditem').dom && that.dom.find('.chooseditem').dom.length >= 10) {
                that.dom.find('.contentinput').val('');
                that.event._dispatch('inputarea.maxnum');
            } else {
                var label = '<span class="chooseditem" dataid="' + value2 + '">\n' + '                            <label>' + value + '</label>\n' + '                            <i class="iconfont icon-guanbi"></i>\n' + '                        </span>';
                that.dom.find('.contentinput').before(label);
                if (!value2) {
                    that.event._dispatch('controls.createlabel', { val: that.dom.find('.contentinput').val() });
                }
                that.dom.find('.chooseditem .icon-guanbi').off('click');
                that.bindlabeldelete();
                that.dom.find('.contentinput').val('');
                if (!bool) {
                    that.event._dispatch('inputarea.createitem', value2);
                }
            }
        }
    }, {
        key: 'bindlabeldelete',
        value: function bindlabeldelete() {
            var that = this;
            that.dom.find('.chooseditem .icon-guanbi').on('click', function (e) {
                e.stopPropagation();
                if (that.type == 1) {
                    that.event._dispatch('inputarea.deleteitem', { id: ES.selctorDoc(this).parent().attr('dataid'), dom: ES.selctorDoc(this).parent() });
                } else {
                    ES.selctorDoc(this).parent().remove();
                    that.event._dispatch('inputarea.deleteitem', ES.selctorDoc(this).parent().attr('dataid'));
                }
            });
        }
    }, {
        key: 'removedom',
        value: function removedom(dom) {
            dom.remove();
        }
    }, {
        key: 'setlist',
        value: function setlist(value) {
            var that = this;
            var html = '';
            if (value) {
                value.forEach(function (val, idx) {
                    html += '<li class="contentli" dataid="' + val.id + '">' + val.name + '</li>';
                });
                that.dom.find('.contentul').html(html);
                if (value.length > that.maxshownum) {
                    that.dom.find('.scroll').css({ height: that.linehigh * that.maxshownum });
                    that.initscrollmenu();
                }
                that.dom.find('.ularea').removeClass('hide');
                that.dom.find('.mask').removeClass('hide');
                that.dom.find('.contentli').on('click', function () {
                    ES.selctorDoc(this).parent().html('');
                    that.createlabel(ES.selctorDoc(this).html(), ES.selctorDoc(this).attr('dataid'));
                });
            } else {
                that.dom.find('.contentul').html('');
            }
        }
    }, {
        key: 'render',
        value: function render(value) {}
    }, {
        key: 'disable',
        value: function disable() {
            this.dom.find('.contentinput').remove();
            this.dom.find('.contentarea .icon-guanbi').remove();
            this.dom.find('.contentarea').off('click');
        }
    }, {
        key: 'loading',
        value: function loading(bool) {
            if (bool) {
                this.dom.find('.contentul').html('');
                this.dom.find('.scroll').css({ height: '50px' });
                this.initscrollmenu();
                this.dom.find('.loading_xlk').removeClass('hide');
            } else {
                this.dom.find('.scroll').css({ height: 'unset' });
                this.dom.find('.loading_xlk').addClass('hide');
            }
        }
    }, {
        key: 'initscrollmenu',
        value: function initscrollmenu() {
            if (this.myScroll1) {
                this.myScroll1.refresh();
                return;
            }

            var rid = 'aaa_' + Math.floor(new Date().getTime() * Math.random());
            this.dom.find('.scroll').attr('id', rid);
            this.myScroll1 = new IScroll('#' + rid, {
                scrollbars: true,
                mouseWheel: true,
                interactiveScrollbars: true,
                hideScrollbar: false,
                vScrollbar: true,
                shrinkScrollbars: 'scale',
                fadeScrollbars: false,
                disableMouse: true,
                disablePointer: true
            });
        }
    }]);

    return inputarea;
}(Interstellar.moduleBase);

//原型链一定要有的


module.exports = inputarea;

/***/ }),

/***/ 866:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(867);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(471)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./inputarea.less", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!../../../node_modules/less-loader/dist/cjs.js!./inputarea.less");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 867:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(470)(false);
// imports


// module
exports.push([module.i, ".inputarea {\n  position: relative;\n  width: 100%;\n}\n.inputarea .contentarea {\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  width: 400px;\n  height: 100%;\n  z-index: 11;\n  position: relative;\n}\n.inputarea .contentarea .contentinput {\n  margin-left: 18px;\n  border: none;\n  width: 100px;\n  height: 30px;\n}\n.inputarea .contentarea .chooseditem {\n  position: relative;\n  margin-left: 15px;\n  margin-top: 5px;\n}\n.inputarea .contentarea .chooseditem .icon-guanbi {\n  position: absolute;\n  right: -14px;\n  top: -3px;\n  font-size: 12px;\n  cursor: pointer;\n}\n.inputarea .ularea {\n  width: 100%;\n  position: absolute;\n}\n.inputarea .scroll {\n  overflow: hidden;\n  position: relative;\n  background: #fff;\n}\n.inputarea .contentul {\n  position: relative;\n  z-index: 100;\n  width: 100%;\n  background: #fff;\n  border-left: 1px solid #e8e8e8;\n  border-right: 1px solid #e8e8e8;\n  border-radius: 4px;\n}\n.inputarea .contentul .contentli {\n  height: 30px;\n  line-height: 30px;\n  cursor: pointer;\n  border-bottom: 1px solid #e8e8e8;\n}\n.inputarea .contentul .contentli:hover {\n  background: #FAFAFA;\n}\n.inputarea .loading_xlk {\n  background: url(/images/loading1.gif) no-repeat 35px -28px;\n  height: 50px;\n  width: 100%;\n  top: 0px;\n  z-index: 2000;\n  position: absolute;\n}\n.inputarea .mask {\n  position: absolute;\n  width: 5000px;\n  height: 5000px;\n  z-index: 10;\n  top: -1000px;\n  left: -1000px;\n}\n", ""]);

// exports


/***/ }),

/***/ 868:
/***/ (function(module, exports) {

module.exports = "<div class=inputarea> <div class=contentarea> <input type=text class=contentinput /> </div> <div class=ularea> <div class=scroll> <ul class=contentul> </ul> <div class=\"loading_xlk hide\"></div> </div> </div> <div class=\"mask hide\"></div> </div>";

/***/ })

});
//# sourceMappingURL=e30ed4509a1e8cb8498b.57.min.js.map