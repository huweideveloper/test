webpackJsonp([65],{2047:function(t,e,n){"use strict";var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(2048);var i=function(t){function e(t,a,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a,i,o));return r.html=n(2050),r.name="configModal",r.apidata={},r.allobj={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.modalBase),a(e,[{key:"complete",value:function(){this.render(),this.initView()}},{key:"render",value:function(){var t=this;console.log(t.api.config),t.api.config.forEach(function(e,a){var i="";switch(e.type){case"input":var o=e.inputtype?e.inputtype:"text";console.log(e.disabled,"disbbbb"),i+='<div class="inputLine" redlabel="inputBox">\n                <span class="names">'+e.title+'</span>\n                <input type="'+o+'" class="inputBox '+e.name+'" check="'+e.check+'" api="'+e.name+'" '+e.disabled+'/>                <p class="remark">'+e.remark+"</p>            </div>",t.dom.find(".configModal").append(i),e.value&&(t.dom.find("."+e.name).val(e.value),t.apidata[e.name]=e.value);break;case"dropdown":i+='<div class="inputLine" redlabel="xlk">\n                <span class="names">'+e.title+'</span>\n                <div class="'+e.name+'" check="'+e.check+'"></div>                <p class="remark">'+e.remark+"</p>            </div>",t.dom.find(".configModal").append(i),n.e(82).then(function(){var a=n(919),i=t.app.loadModule(a,t.dom.find("."+e.name),{className:"xlk",firstSelect:{val:"",idx:""},data:e.data,datatype:e.datatype});i.event._addEvent("option.click",function(n){console.log(t.apidata,"that.apidata",n,e.name),t.apidata[e.name]=n.idx}),i.event._addEvent("dropDown.clear",function(n){t.apidata[e.name]=""}),t.allobj[e.name]=i,e.value&&t.dom.find("."+e.name+' .option[data-idx="'+e.value+'"]').click()}.bind(null,n)).catch(n.oe);break;case"radio":var r="";e.data.forEach(function(t){r+='<div class="item" data-id="'+t.idx+'">\n                <i class="radio-box"></i>\n                <span>'+t.val+"</span>\n            </div>"}),i+='<div class="inputLine radioArea" redlabel="names" check="empty" title="">\n                <span class="names">'+e.title+"</span>\n"+r+'                <p class="remark">'+e.remark+"</p>            </div>",t.dom.find(".configModal").append(i),t.dom.find(".radioArea .radio-box").on("click",function(){ES.selctorDoc(this).parents("radioArea").find(".choose").removeClass("choose"),ES.selctorDoc(this).addClass("choose"),t.apidata[e.name]=ES.selctorDoc(this).parent().attr("data-id")})}}),t.dom.find(".modal-title").html(t.api.title)}},{key:"initView",value:function(){var t=this;t.dom.find(".inputBox").on("change",function(){t.apidata[ES.selctorDoc(this).attr("api")]=ES.selctorDoc(this).val()}),this.dom.find(".icon-guanbi").on("click",function(){t.close()}),this.dom.find(".btn-cancel").on("click",function(){t.close()}),this.dom.find(".btn-confirm").on("click",function(){if(t.dom.find(".tips").remove(),t.dom.find(".inputLine").dom.forEach(function(t,e){t.find("."+t.attr("redlabel")).removeClass("redborder"),t.find(".required").remove(),""!==Tool.checkForm(ES.selctorDoc(t).dom,"red")&&(t.find("."+t.attr("redlabel")).addClass("redborder"),t.find("."+t.attr("redlabel")).after('<span class="required">'+Tool.checkForm(ES.selctorDoc(t).dom,"red")+"</span>"))}),t.dom.find(".redborder").dom)return!1;t.event._dispatch("formsubmit.submit",t.apidata)})}},{key:"showerror",value:function(t){var e=this;Object.keys(t).forEach(function(n){e.dom.find("."+n).after('<span class="tips">'+t[n]+"</span>")})}}]),e}();t.exports=i},2048:function(t,e,n){var a=n(2049);"string"==typeof a&&(a=[[t.i,a,""]]);var i={transform:void 0};n(705)(a,i);a.locals&&(t.exports=a.locals)},2049:function(t,e,n){(t.exports=n(704)(!1)).push([t.i,".configModal span {\n  margin-left: 0px;\n}\n.configModal .inputLine {\n  position: relative;\n  height: 40px;\n  margin-top: 10px;\n}\n.configModal .inputLine > div {\n  display: inline-block;\n}\n.configModal .inputLine .confirm {\n  margin-right: 0;\n}\n.configModal .inputLine .inputBox {\n  width: 130px;\n  height: 30px;\n  line-height: 38px;\n  border: 1px solid #E8E8E8;\n  border-radius: 4px;\n  outline: none;\n  padding-left: 5px;\n}\n.configModal .inputLine .xlk {\n  width: 134px;\n  height: 30px;\n  line-height: 30px;\n}\n.configModal .inputLine .names {\n  width: 110px;\n  font-size: 14px;\n  margin-left: 20px;\n}\n.configModal .inputLine p.remark {\n  margin-left: 100px;\n}\n.configModal .inputLine .tips {\n  position: absolute;\n  color: red;\n  top: 33px;\n  left: 135px;\n}\n.configModal .inputLine .required {\n  position: absolute;\n  top: 31px;\n  left: 140px;\n}\n.configModal .radioArea {\n  position: relative;\n}\n.configModal .radioArea .item {\n  position: relative;\n  margin-right: 10px;\n}\n.configModal .radioArea .item .radio-box {\n  vertical-align: sub;\n}\n.configModal .radioArea .required {\n  position: absolute;\n  top: 25px;\n  left: 0;\n}\n",""])},2050:function(t,e){t.exports="<div class=configModal> </div> "},2051:function(t,e,n){"use strict";var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(2052);var i=function(t){function e(t,a,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a,i,o));return r.html=n(2054),r.name="datalist",r.data=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.moduleBase),a(e,[{key:"complete",value:function(){var t=this;this.nowParam.addnew||this.dom.find(".icon-tianjia").remove(),n.e(95).then(function(){t.editdataconfigClass=n(1908)}.bind(null,n)).catch(n.oe),this.dom.find(".addBtn").on("click",function(){t.event._dispatch("datalist.addChoose")})}},{key:"setData",value:function(t,e){if(this.dom.find("ul").html(""),0!=t.length)for(var n=0;n<t.length;n++)this.addli(t[n],e);this.dom.find("ul .multili").eq(0).click()}},{key:"addli",value:function(t,e){var n=this,a="（";switch(t.type){case"number":a+="数字范围模式）";break;case"radio":a+="单选模式）";break;case"time":a+="时间模式）";break;case"checkBox":a+="复选模式）"}var i='<li bid="'+t.id+'" class="multili multili'+t.id+'" code="'+t.code+'" title="'+t.name+'"><span>'+t.name+a+'</span><a class="delicon iconfont icon-shanchu hide" title=""></a></li>';this.dom.find("ul").append(i),this.dom.find("ul .multili"+t.id+" .delicon").on("click",function(){console.log("shan")}),this.dom.find("ul .multili"+t.id).on("click",function(){n.dom.find("ul .multili").removeClass("choose");var t=ES.selctorDoc(this);t.addClass("choose"),n.chooseData={bid:t.attr("bid"),code:t.attr("code")},n.event._dispatch("datalist.choose",n.chooseData)})}}]),e}();t.exports=i},2052:function(t,e,n){var a=n(2053);"string"==typeof a&&(a=[[t.i,a,""]]);var i={transform:void 0};n(705)(a,i);a.locals&&(t.exports=a.locals)},2053:function(t,e,n){(t.exports=n(704)(!1)).push([t.i,".datalist .name {\n  font-size: 16px;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 40px;\n  background: #ccc;\n  color: #666;\n}\n.datalist .name .icon-tianjia {\n  font-size: 12px;\n  margin-left: 30px;\n  color: #666;\n}\n.datalist ul .multili {\n  text-align: left;\n  padding-left: 24px;\n  font-size: 12px;\n  line-height: 40px;\n  background: #eee;\n  color: #999;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.datalist ul .multili span {\n  display: unset;\n}\n.datalist ul .multili:hover {\n  background: #448E97;\n  color: #fff;\n}\n.datalist ul .multili.choose {\n  background: #448E97;\n  color: #fff;\n}\n",""])},2054:function(t,e){t.exports='<div class=datalist> <p class=name> 选项数据配置<a class="iconfont icon-tianjia config addBtn" title=创建选项数据类型></a> </p> <ul></ul> </div> '},2058:function(t,e,n){(t.exports=n(704)(!1)).push([t.i,".dataconfig {\n  position: relative;\n  min-height: 837px;\n  background: #fff;\n  margin-top: 20px;\n}\n.dataconfig .fillBtn {\n  position: absolute;\n  top: 8px;\n  right: -10px;\n  cursor: pointer;\n}\n.dataconfig .list_left {\n  width: 16%;\n  margin-right: 10px;\n}\n.dataconfig .content_list {\n  width: 72%;\n}\n",""])},305:function(t,e,n){"use strict";var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(i,o){try{var r=e[i](o),l=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}var o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.pagesBase),a(e,[{key:"complete",value:function(){var t=this;this.action={},this.addNew=!1;var e=this.app.userResource[ES.selctorDoc('.menu .twolink[link="dataconfig"]').parent().attr("id")];e&&e.length>0&&e.forEach(function(e){switch(e.type){case"CREATE_TYPE":t.addNew=!0;break;case"CREATE":t.dom.find(".btnarea").append('<div class="fillBtn addc">'+e.name+"</div>");break;case"EDIT":t.action={viewmark:{dis:"inline",link:"noLink",content:"编辑"}}}}),this.loadmoudel(),this.loadTable(),this.btnEvent(),this.apiload()}},{key:"apiload",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.app.loading.show(),t.next=3,this.api.dict_search({parentId:0,page:0,pageSize:-1});case 3:e=t.sent,this.app.loading.hide(),this.dataControl.setData(e.data.list);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"btnEvent",value:function(){var t=this;this.dom.find(".addc").on("click",function(){t.dataControl.chooseData&&t.openModal("add",null)})}},{key:"openModal",value:function(t,e){var n=this;e&&(e.code=e.value);var a=[{name:"name",type:"input",title:"名称",value:e?e.name:"",check:"empty",remark:""},{name:"value",type:"input",title:"编码",value:e?e.value:"",check:"empty",remark:"",disabled:"add"==t?"":"disabled"},{name:"remark",type:"input",title:"数值",value:e?e.remark:"",check:"",remark:""}],o=this.app.loadModal(this.editdataconfigClass,{adv:!1,class:"xs",title:"add"==t?"创建":"编辑",type:"code-need"},{config:a});o.event._addEvent("formsubmit.submit",function(){var a=i(regeneratorRuntime.mark(function a(i){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.app.loading.show(),i.parentId=1*n.dataControl.chooseData.bid,r=null,"add"!=t){a.next=9;break}return a.next=6,n.api.dict_create(i);case 6:r=a.sent,a.next=13;break;case 9:return i.id=1*e.id,a.next=12,n.api.dict_update(i);case 12:r=a.sent;case 13:n.app.loading.hide(),n.codeFinish(r,o);case 15:case"end":return a.stop()}},a,n)}));return function(t){return a.apply(this,arguments)}}())}},{key:"codeFinish",value:function(t,e){if(1*t.code==0){e.close(),this.newList=!0;var n=this.model.listInfo.pageSize;this.model.listInfo={parentId:1*this.dataControl.chooseData.bid,page:1,pageSize:n},this.model.setData("listInfo",this.model.listInfo)}else e.showerror({value:t.msg})}},{key:"loadTable",value:function(){var t=this,e={icon:{value:{name:'<span data-i18n="date" data-name="检查时间">编码</span>',type:"text",code:"date",w:"30%",ww:"30%"},name:{name:'<span data-i18n="action" data-name="操作">名称</span>',type:"text",code:"action",w:"40%",ww:"40%"},remark:{name:'<span data-i18n="action" data-name="操作">数值</span>',type:"text",code:"action",w:"40%",ww:"40%"}},actionulwidth:100};e.tablewidth=this.dom.find(".content_list").box().clientWidth-140,e.type="center",e.actionicon={operation:{name:'<span data-i18n="action" data-name="操作">操作</span>',type:"action",code:"action",w:"100%",ww:"100%"}},n.e(85).then(function(){var a=n(952);t.table=t.app.loadModule(a,t.dom.find(".content_list"),{id:"content_list",header:e}),t.table.event._addEvent("table.action",function(e){t.openModal("edit",t.listdata[e.id])}),t.table.event._addEvent("table.pagenumber",function(e){t.newList=!1,t.model.listInfo.page=parseInt(e),t.model.setData("listInfo",t.model.listInfo),t.table.changenum(t.model.listInfo.page)}),t.table.event._addEvent("table.pagesize",function(e){t.model.listInfo.page=1,t.model.listInfo.pageSize=e.num,t.newList=!0,t.model.setData("listInfo",t.model.listInfo)}),t.dom.find(".list-content").removeClass("hide")}.bind(null,n)).catch(n.oe)}},{key:"loadmoudel",value:function(){var t=this;this.editdataconfigClass=n(2047);var e=n(2051);this.dataControl=this.app.loadModule(e,this.dom.find(".list_left"),{addnew:this.addNew}),this.dataControl.event._addEvent("datalist.addChoose",function(e){var n=t.app.loadModal(t.editdataconfigClass,{adv:!1,class:"xs",title:"创建选项数据类型",type:"code-need",itemtitle:{yyy:"选项类型名称"}},{config:[{name:"name",type:"input",title:"选项类型名称",value:"",check:"empty",remark:""},{name:"value",type:"input",title:"编码",value:"",check:"empty",remark:""},{name:"type",type:"dropdown",title:"显示类型",value:"",remark:"",check:"empty",data:[{val:"时间模式",idx:"time"},{val:"数字范围模式",idx:"number"},{val:"复选模式",idx:"checkBox"},{val:"单选模式",idx:"radio"}]}]});n.event._addEvent("formsubmit.submit",function(){var e=i(regeneratorRuntime.mark(function e(a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.app.loading.show(),a.parentId=0,e.next=4,t.api.dict_create(a);case 4:i=e.sent,t.app.loading.hide(),0==i.code?(n.close(),t.apiload()):n.showerror({value:i.msg});case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}),this.dataControl.event._addEvent("datalist.choose",function(e){t.newList=!0,t.model.listInfo={parentId:e.bid,page:1,pageSize:10},t.model.setData("listInfo",t.model.listInfo)})}},{key:"listInfo",value:function(){var t=i(regeneratorRuntime.mark(function t(){var e,n,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.table&&this.table.showloading(),t.next=3,this.api.dict_search(this.model.listInfo);case 3:0!=(e=t.sent).data.list.length?(n=[],this.listdata={},e.data.list.map(function(t){a.listdata[t.id]=t,t.remark=t.remark?t.remark:"",n.push({id:t.id,operation:a.action})}),this.table.setData(e.data.list,n)):this.table.noData(),this.newList&&this.table.getTotal(e.data.pages,2,e.data.total);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}();t.exports=o},783:function(t,e,n){var a=n(2058);"string"==typeof a&&(a=[[t.i,a,""]]);var i={transform:void 0};n(705)(a,i);a.locals&&(t.exports=a.locals)},784:function(t,e,n){"use strict";var a="/dict/create",i="/dict/update",o="/dict/search",r={dict_create:function(t){return this.HttpRequest.POST(a,t,r.app.domain3)},dict_update:function(t){return this.HttpRequest.POST(i,t,r.app.domain3)},dict_search:function(t){return this.HttpRequest.POST(o,t,r.app.domain3)}};t.exports=r},785:function(t,e){t.exports='<div class=dataconfig> <div> <div class=btnarea></div> <div class="list_left fl"></div> <div class="content_list fl"></div> <div style=clear:both></div> </div> </div> '},786:function(t,e,n){"use strict";var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.___auto=!0,n.listInfo={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.modelBase),e}();t.exports=a}});