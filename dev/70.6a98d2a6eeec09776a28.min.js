webpackJsonp([70],{2170:function(e,t,a){(e.exports=a(704)(!1)).push([e.i,".viewaudittask {\n  background: #fff;\n}\n.viewaudittask .breadcrumb {\n  padding: 40px 0 0 70px;\n  font-size: 16px;\n  margin-right: 10px;\n}\n.viewaudittask .breadcrumb .lastlink {\n  color: #ccc;\n  cursor: pointer;\n}\n.viewaudittask .joinpro {\n  position: absolute;\n  right: 40px;\n  top: 50px;\n  height: 35px;\n  line-height: 35px;\n  background: #4c9fa9;\n  color: #fff;\n  padding: 0 20px;\n}\n.viewaudittask .taskdetail {\n  margin: 20px 0 40px 70px;\n}\n.viewaudittask .taskdetail p {\n  line-height: 40px;\n}\n.viewaudittask .taskdetail p span {\n  width: 40%;\n}\n.viewaudittask .taskdetail p .single {\n  width: 90%;\n}\n.viewaudittask .sequencearea {\n  display: flex;\n  min-height: 300px;\n  margin-left: 70px;\n}\n.viewaudittask .sequencearea .personarea {\n  width: 160px;\n  border-right: 1px solid #e8e8e8;\n}\n.viewaudittask .sequencearea .personarea .menutitle {\n  height: 60px;\n  line-height: 60px;\n}\n.viewaudittask .sequencearea .personarea .left .navFirst {\n  padding-left: 20px;\n  height: 40px;\n  line-height: 40px;\n  cursor: pointer;\n}\n.viewaudittask .sequencearea .personarea .left .choosedks {\n  background: #ecf3f4;\n}\n.viewaudittask .sequencearea .listarea {\n  flex: 1;\n}\n.viewaudittask .sequencearea .listarea .filterarea {\n  padding-left: 20px;\n}\n.viewaudittask .sequencearea .listarea .filterarea input {\n  height: 32px;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  margin-right: 10px;\n}\n.viewaudittask .sequencearea .listarea .personinfo {\n  margin: 10px 0;\n  padding-left: 20px;\n}\n.viewaudittask .sequencearea .listarea .personinfo span {\n  width: 20%;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.viewaudittask .sequencearea .listarea .personinfo .viewall {\n  background: #4c9fa9;\n  color: #fff;\n  padding: 0 20px;\n  height: 40px;\n  line-height: 40px;\n}\n",""])},335:function(e,t,a){"use strict";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(n,s){try{var r=t[n](s),o=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.pagesBase),i(t,[{key:"complete",value:function(){var e=this;this.styleModel(1),this.id=this.app.parpam.id,this.total=0,this.model._event._addEvent("taskid.change",function(){e.settaskdata()}),this.action={viewmark:{dis:"inline",link:"noLink",content:"查看审核结果"}},this.render(),this.setTitle(),this.dom.find(".breadcrumb .lastlink").on("click",function(){e.app.model.del("viewaudittask"),e.app.changePage("audittask")}),this.model._event._addEvent("querylist.change",n(regeneratorRuntime.mark(function t(){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.model.getData("querylist").reset,e.app.loading.show(),t.next=4,e.api.audit_task_user_series_search(e.model.getData("querylist"));case 4:i=t.sent,e.app.loading.hide(),0==i.code?e.setMain(i,a):Tool.errorshow(i.msg,e.app);case 7:case"end":return t.stop()}},t,e)})))}},{key:"render",value:function(){var e=this;a.e(84).then(function(){var t=a(1528);e.menutree=e.app.loadModule(t,e.dom.find(".personarea .left"),{config:["mobilePhone","venderName","seriesAuditNum","imageAnnoNum"]}),e.model.setData("taskid",e.taskId),e.menutree.event._addEvent("navFirst.choosed",function(t){e.doingnum=t.config.split(",")[3],e.dom.find('label[api="username"]').html(t.config.split(",")[0]),e.dom.find('label[api="venderName"]').html(t.config.split(",")[1]),e.dom.find('label[api="seriesAuditNum"]').html(t.config.split(",")[2]),e.dom.find('label[api="imageAnnoNum"]').html(t.config.split(",")[3]),e.chooseUserId=parseInt(t.id),e.model.querylist.userId=parseInt(t.id),e.model.querylist.serialNumber=e.dom.find('input[api="serialNumber"]').val(),e.model.setData("querylist",e.model.querylist)})}.bind(null,a)).catch(a.oe),this.dom.find(".viewall").on("click",function(){e.app.model.set("viewaudittask",e.model.querylist),e.app.changePage(e.taskInfo.data.largeFigure?"drapCanvasAud":"markauditview",{taskId:e.app.parpam.id,taskInfo:e.total+"$$0",type:"check_viewer_all",uid:e.model.querylist.userId})}),this.dom.find(".sequencearea .search").on("click",function(){e.model.setData("querylist",{id:parseInt(e.id),userId:parseInt(e.dom.find(".choosedks").attr("did")),page:1,pageSize:10,reset:!0,serialNumber:e.dom.find('input[api="serialNumber"]').val()})})}},{key:"setTitle",value:function(){var e=this,t={icon:{serialNumber:{name:'<span data-i18n="date" data-name="检查时间">序列名称</span>',type:"text",code:"date",w:"40%",ww:"40%",n:40},imageAnnoNum:{name:'<span data-i18n="action" data-name="操作">病灶数量</span>',type:"text",code:"action",w:"20%",ww:"20%"},status:{name:'<span data-i18n="action" data-name="操作">序列状态</span>',type:"text",code:"action",w:"15%",ww:"15%"},auditTime:{name:'<span data-i18n="action" data-name="操作">审核时间</span>',type:"text",code:"action",w:"30%",ww:"30%"}},actionulwidth:200};t.tablewidth=ES.selctorDoc(".viewaudittask").box().clientWidth-471,t.type="center",t.actionicon={operation:{name:'<span data-i18n="action" data-name="操作">操作</span>',type:"action",code:"action",w:"100%",ww:"100%"}},a.e(85).then(function(){var i=a(952);e.table=e.app.loadModule(i,e.dom.find(".serieslist"),{id:"serieslist",header:t}),e.table.event._addEvent("table.action",function(t){e.app.model.set("viewaudittask",e.model.querylist),e.app.changePage(e.taskInfo.data.largeFigure?"drapCanvasAud":"markauditview",{taskId:e.app.parpam.id,taskInfo:t.id,type:"check_viewer"})}),e.table.event._addEvent("table.pagenumber",function(t){var a=e.model.getData("querylist");a.reset=!1,a.page=parseInt(t),e.model.setData("querylist",a)}),e.table.event._addEvent("table.pagesize",function(t){var a=e.model.getData("querylist");a.page=1,a.pageSize=t.num,a.reset=!0,e.model.setData("querylist",a)}),e.dom.find(".list-content").removeClass("hide")}.bind(null,a)).catch(a.oe)}},{key:"setMain",value:function(e,t){var a=this,i=[];0==e.code?(this.total=e.data.total,e.data.list.length>0?(e.data.list.forEach(function(e){for(var t in e)e[t]=null==e[t]?"":e[t];var n={};e.id=e.serialNumber+"$$"+e.sarId+"$$"+a.model.querylist.userId,n.id=e.id,"2"==String(e.status)||"1"==String(e.status)?(e.status="审核进行中",n.operation=a.action):(e.status="已提交",n.operation=a.action),i.push(n),e.auditTime=e.auditTime?Tool.time(e.auditTime,"yyyy-mm-dd HH:MM:ss"):"无"}),this.table.setData(e.data.list,i)):this.table.noData()):Tool.errorshow(e.msg,this.app),t&&(this.table.getTotal(e.data.pages,2,e.data.total),this.table.changenum(this.model.querylist.page,this.model.querylist.pageSize))}},{key:"settaskdata",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,a,i,n,s,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.id},a=["name","projectName","joinTaskList","remark","seriesTotalNum","seriesAuditNum","auditChoose","clusterType"],this.app.loading.show(),e.next=5,this.api.audit_task_read(t);case 5:if(i=e.sent,this.taskInfo=i,this.app.loading.hide(),0!=i.code){e.next=52;break}n="",i.data.description=JSON.parse('"'+i.data.description+'"'),i.data.joinTaskList.forEach(function(e){n+=e.name+"   "}),i.data.joinTaskList=n,e.t0=i.data.auditChoose,e.next=1===e.t0?16:2===e.t0?18:3===e.t0?20:22;break;case 16:return i.data.auditChoose="一致部分",e.abrupt("break",22);case 18:return i.data.auditChoose="不一致部分",e.abrupt("break",22);case 20:return i.data.auditChoose="全集",e.abrupt("break",22);case 22:e.t1=i.data.clusterType,e.next=1===e.t1?25:2===e.t1?27:3===e.t1?29:31;break;case 25:return i.data.clusterType="序列征象",e.abrupt("break",31);case 27:return i.data.clusterType="影像标注",e.abrupt("break",31);case 29:return i.data.clusterType="阴阳性",e.abrupt("break",31);case 31:if(a.forEach(function(e){"remark"==e?r.dom.find('label[apidata="'+e+'"]').html(i.data[e]?JSON.parse('"'+i.data[e]+'"'):""):"name"==e?r.dom.find('label[apidata="'+e+'"]').html(i.data[e]+(i.data.studyAnno?"(以检查号为维度)":"")):r.dom.find('label[apidata="'+e+'"]').html(i.data[e])}),this.projectId=i.data.projectId,3!=i.data.status&&4!=i.data.status){e.next=49;break}e.t2=i.data.joinAuditProjectStatus,e.next=0===e.t2?37:1===e.t2?40:2===e.t2?42:3===e.t2?44:47;break;case 37:return this.dom.find(".joinpro").html("合并结果"),this.clickevent(),e.abrupt("break",47);case 40:return this.dom.find(".joinpro").html("合并中"),e.abrupt("break",47);case 42:return this.dom.find(".joinpro").html("合并完成"),e.abrupt("break",47);case 44:return this.dom.find(".joinpro").html("合并结果"),this.clickevent(),e.abrupt("break",47);case 47:e.next=50;break;case 49:this.dom.find(".joinpro").addClass("hide");case 50:e.next=53;break;case 52:Tool.errorshow(i.msg,this.app);case 53:return e.next=55,this.api.audit_task_user_list(t);case 55:0==(s=e.sent).code?(this.menutree.changeMenu(s.data.userList,"single"),this.app.model.get("viewaudittask")?(this.model.setData("querylist",this.app.model.get("viewaudittask")),this.app.model.get("viewaudittask").serialNumber&&this.dom.find('.filterarea input[api="serialNumber"]').val(this.app.model.get("viewaudittask").serialNumber),this.app.model.get("viewaudittask").userId&&this.dom.find('.treeArea .navFirst[did="'+this.app.model.get("viewaudittask").userId+'"]').click()):this.dom.find(".treeArea .navFirst").eq(0).click()):Tool.errorshow(s.msg,this.app);case 57:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"clickevent",value:function(){var e=this;this.dom.find(".joinpro").on("click",n(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.api.series_result_task_join({taskId:e.id});case 2:0==(a=t.sent).code?(e.dom.find(".joinpro").html("合并中"),e.dom.find(".joinpro").off("click")):e.app.alert.show({title:" ",msg:a.msg,close:!1});case 4:case"end":return t.stop()}},t,e)})))}}]),t}();e.exports=s},867:function(e,t,a){var i=a(2170);"string"==typeof i&&(i=[[e.i,i,""]]);var n={transform:void 0};a(705)(i,n);i.locals&&(e.exports=i.locals)},868:function(e,t,a){"use strict";var i="/audit/task/read",n="/audit/task/user/list",s="/audit/task/user/series/search",r="/audit/project/series/result/task/join",o={audit_task_read:function(e){return this.HttpRequest.POST(i,e)},audit_task_user_list:function(e){return this.HttpRequest.POST(n,e)},audit_task_user_series_search:function(e){return this.HttpRequest.POST(s,e)},series_result_task_join:function(e){return this.HttpRequest.POST(r,e)}};e.exports=o},869:function(e,t){e.exports='<div class=viewaudittask> <div> <div class=breadcrumb> <span class=lastlink link=taskmanage>返回审核任务列表</span>> <span class=nowlink>审核任务</span> </div> <a class="joinpro biaozhubtn">合并结果</a> <div class=taskdetail> <p> <span>审核任务名称：<label apidata=name></label></span> <span>所属审核项目：<label apidata=projectName></label></span> </p> <p> <span class=single>被审核源匹配项：<label apidata=joinTaskList></label></span> </p> <p> <span class=single>审核任务备注：<label apidata=remark></label></span> </p> <p> <span>可审核序列：<label apidata=seriesTotalNum></label></span> <span>已审核序列：<label apidata=seriesAuditNum></label></span> </p> <p> <span>审核集：<label apidata=auditChoose></label></span> <span>数据匹配项：<label apidata=clusterType></label></span> </p> </div> <div class=sequencearea> <div class=personarea> <span class=menutitle>提交人姓名</span> <div class=left></div> </div> <div class=listarea> <div class=filterarea> 序号：<input type=text api=serialNumber /> <a class="strokeBtn search">查询</a> </div> <div class=personinfo> <span class="">提交人用户名:<label api=username></label></span> <span class="" style=width:16%>所属单位:<label api=venderName></label></span> <span class="" style=width:15%>共已审核序列数量:<label api=seriesAuditNum></label></span> <span class="" style=width:12%>病灶数量:<label api=imageAnnoNum></label></span> <a class="viewall biaozhubtn">查看所有审核结果</a> </div> <div class=scrollright> <div class=serieslist></div> </div> </div> </div> </div> </div> '},870:function(e,t,a){"use strict";var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.taskid={},a.userlist={},a.querylist={id:parseInt(a.app.parpam.id),page:1,pageSize:10,reset:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.modelBase),t}();e.exports=i}});