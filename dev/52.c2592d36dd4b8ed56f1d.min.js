webpackJsonp([52],{1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1145),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t.default=i.a},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{title:{type:String,default:""}},data:function(){return{isMore:!0}},methods:{handleClickMore:function(){this.isMore=!this.isMore}}}},1375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1376),i=n(1144);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n(1378);var o=n(921),s=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);s.options.__file="app/components/filter-container/index.vue",t.default=s.exports},1376:function(e,t,n){"use strict";var a=n(1377);n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b})},1377:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comp-filter-container"},[e.title?n("div",{staticClass:"title-wrapper"},[n("span",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),n("span",{class:"more "+(e.isMore?"":"unfold"),on:{click:e.handleClickMore}},[e._v(e._s(e.isMore?"收起":"展开"))])]):e._e(),e._v(" "),e.isMore?n("div",{staticClass:"content-wrapper"},[e._t("default")],2):e._e()])},i=[];a._withStripped=!0},1378:function(e,t,n){"use strict";var a=n(1379);n.n(a)},1379:function(e,t,n){var a=n(1380);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(705)(a,i);a.locals&&(e.exports=a.locals)},1380:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,".comp-filter-container {\n  background: #fff;\n  padding: 0px 10px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  margin-top: -10px;\n}\n.comp-filter-container .title-wrapper .title {\n  font-size: 16px;\n  color: #333;\n}\n.comp-filter-container .title-wrapper .more {\n  float: right;\n  color: #999;\n  cursor: pointer;\n}\n.comp-filter-container .title-wrapper .more::after {\n  content: '';\n  display: inline-block;\n  height: 10px;\n  width: 10px;\n  border-width: 0 1px 1px 0;\n  border-color: #999;\n  border-style: solid;\n  transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0);\n  transform-origin: center;\n  transition: transform 0.3s;\n  margin-left: 8px;\n  vertical-align: top;\n}\n.comp-filter-container .title-wrapper .unfold:after {\n  transform-origin: center;\n  transform: rotate(-135deg);\n  transition: transform 0.3s;\n  vertical-align: middle;\n}\n.comp-filter-container .el-row {\n  display: flex;\n  align-items: center;\n}\n.comp-filter-container .el-input,\n.comp-filter-container .el-select,\n.comp-filter-container .el-cascader {\n  width: 95%;\n}\n.comp-filter-container .el-range-separator {\n  width: unset;\n}\n.comp-filter-container .el-form-item {\n  display: flex;\n  margin-bottom: 10px;\n}\n.comp-filter-container .el-form-item .el-form-item__content {\n  flex: 1;\n  margin-left: 0 !important;\n}\n.comp-filter-container .el-form-item .el-form-item__content .el-form-item {\n  margin-bottom: 0;\n  line-height: 34px;\n}\n.comp-filter-container .el-form-item-inline > .el-form-item__content {\n  font-size: 0;\n}\n.comp-filter-container .el-form-item-inline > .el-form-item__content .el-form-item {\n  display: inline-block;\n}\n.comp-filter-container .content-wrapper {\n  padding: 10px;\n}\n.comp-filter-container .el-button {\n  padding: 8px 20px;\n}\n",""])},1423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1424),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t.default=i.a},1424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={inheritAttrs:!0,data:function(){return{}},methods:{handleInput:function(e){this.$refs.elSelect.debouncedQueryChange(e)}}}},1774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1775),i=n(1423);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);var o=n(921),s=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);s.options.__file="app/components/select-search/index.vue",t.default=s.exports},1775:function(e,t,n){"use strict";var a=n(1776);n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b})},1776:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a=function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-select",e._g(e._b({ref:"elSelect",nativeOn:{input:function(t){return e.handleInput.apply(null,arguments)}}},"el-select",e.$attrs,!1),e.$listeners),[e._t("default")],2)},i=[];a._withStripped=!0},2063:function(e,t,n){var a=n(2064);"string"==typeof a&&(a=[[e.i,a,""]]);var i={transform:void 0};n(705)(a,i);a.locals&&(e.exports=a.locals)},2064:function(e,t,n){(e.exports=n(704)(!1)).push([e.i,".audittask-container {\n  position: relative;\n}\n.audittask-container .el-dialog__wrapper .el-dialog {\n  width: 500px;\n}\n.audittask-container .filter-conditions-wrapper .el-row {\n  margin-bottom: 10px;\n}\n.audittask-container .el-select .el-input {\n  width: 100%;\n}\n",""])},310:function(e,t,n){"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(2063);var i=l(n(76)),r=l(n(1375)),o=l(n(939)),s=l(n(1774));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,r){try{var o=t[i](r),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Interstellar.pagesBase),a(t,[{key:"complete",value:function(){var e=this;new Vue({el:"#audittask",components:{FilterContainer:r.default,TablePagination:o.default,SelectSearch:s.default},data:function(){return{inputTaskId:"",taskIdList:[],likeTaskList:[],queryTasksLoading:!1,projectIdList:[],likeProjectList:[],queryProjectsLoading:!1,auditTaskType:void 0,sicknessType:null,projectFunction:null,projectTarget:null,auditTaskList:{},page:1,pageSize:10,sicknessTypeList:Tool.configxlkformat(e.app.constmap.SICKNESS_TYPE),projectFunctionList:Tool.configxlkformat(e.app.constmap.PROJECT_FUNCTION),projectTargetList:Tool.configxlkformat(e.app.constmap.AUDIT_PROJECT_TARGET)}},filters:{auditTaskStatusFilter:function(e){return["待发布","进行中","已完成","已终结"][e-1]}},created:function(){var e=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.auditTaskTypeList={1:"B端审核任务",2:"C端审核任务"},this.initPermissions(),this.queryAuditTaskList(!0),this.queryLikeTaskList(),this.queryLikeProjectList();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){},methods:{initPermissions:function(){var t=this;["CREATE","READ","EDIT","EDIT_INFO","EXPORT","START","VIEW_SERIES","COPY","END"].forEach(function(n){var a=("_"+n.toLowerCase()).replace(/\_(\w)/g,function(e,t){return t.toUpperCase()});t["has"+a+"Permission"]=e.checkPermission("audittask",n)})},queryAuditTaskList:function(){var e=u(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(this.page=1),n=this.taskIdList.slice(),this.inputTaskId&&n.push(+this.inputTaskId),e.next=5,i.default.queryAuditTaskList({page:this.page,pageSize:this.pageSize,isReleased:!0,taskIdList:n,projectIdList:this.projectIdList,clientType:this.auditTaskType,sicknessType:this.sicknessType,projectFunction:this.projectFunction,projectTarget:this.projectTarget});case 5:(a=e.sent).data.page=this.page,a.data.pageSize=this.pageSize,this.auditTaskList=a.data;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onChange:function(e,t,n){var a=e.pageNo,i=e.pageSize;this.page=a,this.pageSize=i,this.queryAuditTaskList()},toQueryLikeTaskList:function(e){var t=this;this.queryTasksLoading=!0,setTimeout(function(){t.queryLikeTaskList(e),t.queryTasksLoading=!1},500)},queryLikeTaskList:function(){var e=u(regeneratorRuntime.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.queryLikeTaskList({noLoading:!0,type:2,taskNameKey:n});case 2:t=e.sent,this.likeTaskList=t.data.list;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),toQueryLikeProjectList:function(e){var t=this;this.queryProjectsLoading=!0,setTimeout(function(){t.queryLikeProjectList(e),t.queryProjectsLoading=!1},500)},queryLikeProjectList:function(){var e=u(regeneratorRuntime.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.queryLikeProjectList({noLoading:!0,auditProjectName:n});case 2:t=e.sent,this.likeProjectList=t.data.list;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCreate:function(t){e.app.changePage("C"===t?"createaudittaskc1":"createaudittask1",{type:"new"})},handleCopy:function(e){var t=this,n=e.taskId;this.$confirm("确认复制吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.cloneAuditTask({taskId:n});case 2:t.$message.success("任务复制成功"),t.queryAuditTaskList(!0);case 4:case"end":return e.stop()}},e,t)})))},handleCopyClone:function(e){var t=this,n=e.taskId;this.$confirm("确认复制吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.cloneCopyClone(null,{taskId:n});case 2:t.$message.success("复制成功"),t.queryAuditTaskList(!0);case 4:case"end":return e.stop()}},e,t)})))},handleViewDetail:function(e){var t=e.taskId,n=e.projectId,a=e.status,i=2===e.clientType?"createaudittaskc1":"createaudittask1";window.open(window.location.origin+"/#!/"+i+"/view/"+t+"/"+n+"/"+a)},handleTerminate:function(e){var t=this,n=e.taskId;this.$confirm("是否确定要终结任务，一旦终结外部医生的任务即结束，本次任务也无法再次发布。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.terminateTask({taskId:n});case 2:t.$message.success("任务终结成功"),t.queryAuditTaskList();case 4:case"end":return e.stop()}},e,t)})))},handleEdit:function(e){var t=e.taskId,n=e.projectId,a=e.status,i=2===e.clientType?"createaudittaskc1":"createaudittask1";window.open(window.location.origin+"/#!/"+i+"/edit/"+t+"/"+n+"/"+a)},handleEditInfo:function(e){var t=e.taskId,n=e.projectId,a=e.status,i=2===e.clientType?"createaudittaskc1":"createaudittask1";window.open(window.location.origin+"/#!/"+i+"/edit/"+t+"/"+n+"/"+a)},handleStart:function(){var e=u(regeneratorRuntime.mark(function e(t){var n,a,r,o,s,l,c=this,d=t.taskId,p=t.clientType;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={id:d,submitTime:Date.now()},2!==p){e.next=9;break}return e.next=4,i.default.startAuditTaskC(n);case 4:this.$message.success("任务开启成功"),this.page=1,this.queryAuditTaskList(),e.next=16;break;case 9:return e.next=11,i.default.queryInfoPreStartAuditTask(n);case 11:a=e.sent,r=a.data,o=r.status,s=r.seriesNum,l=["正在计算可审核的序列数量，请等待计算结果","是否确定开始任务，本次任务的需要审核的序列数量为"+s+"个，一旦开始序列数量即为锁定。","计算失败"][o-1],this.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==o){e.next=6;break}return e.next=3,i.default.startAuditTask({id:d});case 3:c.$message.success("任务开启成功"),c.page=1,c.queryAuditTaskList();case 6:case"end":return e.stop()}},e,c)})));case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleViewSeries:function(t){var n=t.taskId,a=t.clientType;e.app.changePage(2===a?"viewaudittaskc":"viewaudittask",{id:n,clientType:a})},handleExport:function(t){var n={taskId:t.taskId},a=e.app.domain1+"v1/audit/task/series/result/export?param="+encodeURIComponent(JSON.stringify(n));e.api.HttpRequest.downLoadFile(a,{key:"accessToken",val:e.app.local.get("accessToken")})},getSelectDataByKey:function(e,t){var n=t.find(function(t){return t.idx===e});return n?n.val:""},handleDownload:function(t){var n=t.projectId,a=window.location.origin+"/aaa/v1/alg/preprocess/result/export?projectId="+n;e.api.HttpRequest.downLoadFile(a,{key:"accessToken",val:e.app.local.get("accessToken")})},handleAction:function(e){var t,n=e.type,a=e.data,i=void 0===a?{}:a,r=i.id,o=i.projectId,s=i.status,l=i.clientType;(c(t={},"READ",this.handleViewDetail),c(t,"EDIT",this.handleEdit),c(t,"EDIT_INFO",this.handleEditInfo),c(t,"EXPORT",this.handleExport),c(t,"START",this.handleStart),c(t,"VIEW_SERIES",this.handleViewSeries),c(t,"COPY",this.handleCopy),c(t,"END",this.handleTerminate),c(t,"COPYCLONE",this.handleCopyClone),c(t,"DOWNLOAD",this.handleDownload),t)[n]({taskId:r,projectId:o,status:s,clientType:l})}}})}}]),t}();e.exports=d},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(65);t.default=(0,a.generateRequestFn)({queryAuditTaskList:"/audit/task/search",cloneAuditTask:"/audit/task/clone",startAuditTask:"/audit/task/start",startAuditTaskC:"/audit/task/to/c/client/start",queryInfoPreStartAuditTask:"/audit/task/series/needaudit/count",queryLikeProjectList:"/audit/project/name/search",queryLikeTaskList:"/task/like/query",terminateTask:"/task/end",cloneCopyClone:"/audit/task/cloneV2",queryAuditProjectList:"/audit/project/name/venderId/search",createAuditTask:"/audit/task/create",updateAuditTask:"/audit/task/update",queryAuditTaskDetail:"/audit/task/read",queryAuditProjectCompList:"/audit/project/component/read",createAuditTaskToolComp:"/audit/task/tool/component/create",queryDoctorTaskProjectList:"/audit/project/task/doctor/project/read",queryProjectSeriesAnnotationResult:"/audit/project/series/annotation/result/read",addAuditTaskSeries:"/audit/task/series/add/",queryAuditTaskSeries:"/audit/task/series/annotation/result/read",deleteAuditTaskSeries:"/audit/task/project/series/annotation/result/delete",queryUserCountForAudit:"/user/annoable/count",queryVendorList:"/vendor/query",queryVendorUserList:"/vendor/user/list",viewComponentDetail:"/formComponent/read",queryAuditTaskToolComp:"/audit/task/tool/component/read",queryAuditTaskLesionComponent:"/audit/task/lesion/component/read",saveAuditTaskLesionComponent:"/audit/task/lesion/component/create",auditTaskUserList:"/audit/task/user/list",auditTaskUserSeriesSearch:"/audit/task/user/series/search",seriesResultTaskJoin:"/audit/project/series/result/task/join"})},800:function(e,t){e.exports='<div id=audittask class=audittask-container> <filter-container> <div class=filter-conditions-wrapper> <el-row> <el-col :span=5> <el-input placeholder=请输入任务ID v-model.trim=inputTaskId clearable></el-input> </el-col> <el-col :span=5> <select-search v-model=taskIdList multiple=multiple collapse-tags filterable clearable reserve-keyword default-first-option placeholder=请选择审核任务 :filter-method=toQueryLikeTaskList :loading=queryTasksLoading> <el-option v-for="item in likeTaskList" :key=item.taskId :label=item.taskName :value=item.taskId> </el-option> </select-search> </el-col> <el-col :span=5> <select-search v-model=projectIdList multiple=multiple collapse-tags filterable clearable reserve-keyword default-first-option placeholder=请选择审核项目 :filter-method=toQueryLikeProjectList :loading=queryProjectsLoading> <el-option v-for="item in likeProjectList" :key=item.auditProjectId :label=item.auditProjectName :value=item.auditProjectId> </el-option> </select-search> </el-col> <el-col :span=4> <el-select v-model=auditTaskType placeholder=请选择任务类型 clearable> <el-option v-for="(name, value) in auditTaskTypeList" :key=value :label=name :value=value> </el-option> </el-select> </el-col> </el-row> <el-row> <el-col :span=5> <el-select v-model=sicknessType placeholder=项目标签 clearable> <el-option v-for="item in sicknessTypeList" :key=item.idx :label=item.val :value=item.idx> </el-option> </el-select> </el-col> <el-col :span=5> <el-select v-model=projectFunction placeholder=项目目标 clearable> <el-option v-for="item in projectFunctionList" :key=item.idx :label=item.val :value=item.idx> </el-option> </el-select> </el-col> <el-col :span=5> <el-select v-model=projectTarget placeholder=项目用途 @change="projectForm.projectTargetDesc = \'\'" clearable> <el-option v-for="item in projectTargetList" :key=item.idx :label=item.val :value=item.idx> </el-option> </el-select> </el-col> <el-col :span=4 :offset=4 style=min-width:200px> <el-button type=primary size=medium @click=queryAuditTaskList(true)>查询</el-button> <el-dropdown placement=bottom trigger=click @command=handleCreate v-if=hasCreatePermission> <el-button type=primary size=medium plain>创建任务<i class="el-icon-arrow-down el-icon--right"></i> </el-button> <el-dropdown-menu slot=dropdown> <el-dropdown-item command=B>B端审核任务</el-dropdown-item> <el-dropdown-item command=C>C端审核任务</el-dropdown-item> </el-dropdown-menu> </el-dropdown> </el-col> </el-row> </div> </filter-container> <table-pagination :data=auditTaskList row-key=id @onchange=onChange> <el-table-column prop=id label=审核任务ID></el-table-column> <el-table-column prop=name label=审核任务名称 min-width=120></el-table-column> <el-table-column label=任务类型> <template slot-scope=scope>{{ auditTaskTypeList[scope.row.clientType] }}</template> </el-table-column> <el-table-column prop=projectName label=所属审核项目名称 min-width=120></el-table-column> <el-table-column prop=sicknessType label=项目标签> <template slot-scope=scope>{{ getSelectDataByKey(scope.row.sicknessType, sicknessTypeList) }}</template> </el-table-column> <el-table-column prop=projectFunction label=项目目标> <template slot-scope=scope>{{ getSelectDataByKey(scope.row.projectFunction, projectFunctionList) }}</template> </el-table-column> <el-table-column prop=projectTarget label=项目用途> <template slot-scope=scope> <span>{{ getSelectDataByKey(scope.row.projectTarget, projectTargetList) }}</span> </template> </el-table-column> <el-table-column label=状态> <template slot-scope=scope>{{ scope.row.status | auditTaskStatusFilter }}</template> </el-table-column> <el-table-column prop=seriesTotalNum label=序列总数></el-table-column> <el-table-column prop=seriesAuditNum label=已审核数量></el-table-column> <el-table-column prop=auditImageNum label=审核病灶数></el-table-column> <el-table-column prop=createUserName label=创建人></el-table-column> <el-table-column label=操作> <template slot-scope=scope> <el-dropdown placement=bottom trigger=click @command=handleAction> <span class=el-dropdown-link> <a class="iconfont icon-caozuo"></a> </span> <el-dropdown-menu slot=dropdown> <el-dropdown-item v-if="hasReadPermission && [1, 2, 3, 4].includes(scope.row.status)" :command="{ type: \'READ\', data: scope.row }">查看详情</el-dropdown-item> <el-dropdown-item v-if="hasEditPermission && [1].includes(scope.row.status)" :command="{ type: \'EDIT\', data: scope.row }">编辑</el-dropdown-item> <el-dropdown-item v-if="hasEditInfoPermission && [2].includes(scope.row.status)" :command="{ type: \'EDIT_INFO\', data: scope.row }">编辑任务信息</el-dropdown-item> <el-dropdown-item v-if="hasEndPermission && [2].includes(scope.row.status)" :command="{ type: \'END\', data: scope.row }">终结任务</el-dropdown-item> <el-dropdown-item v-if="hasExportPermission && [3, 4].includes(scope.row.status)" :command="{ type: \'EXPORT\', data: scope.row }">导出审核结果</el-dropdown-item> <el-dropdown-item v-if="hasStartPermission && [1].includes(scope.row.status)" :command="{ type: \'START\', data: scope.row }">开始任务</el-dropdown-item> <el-dropdown-item v-if="hasViewSeriesPermission && [2, 3, 4].includes(scope.row.status)" :command="{ type: \'VIEW_SERIES\', data: scope.row }">查阅审核结果</el-dropdown-item> <el-dropdown-item v-if="scope.row.clientType !== 2 && hasCopyPermission && [1, 2, 3, 4].includes(scope.row.status)" :command="{ type: \'COPY\', data: scope.row }">复制</el-dropdown-item> <el-dropdown-item v-if="scope.row.clientType !== 1 && hasEndPermission" :command="{ type: \'COPYCLONE\', data: scope.row }">复制</el-dropdown-item> <el-dropdown-item v-if="scope.row.clientType === 2 && hasExportPermission && [8].includes(scope.row.seriesImgFileType) && [3, 4].includes(scope.row.status)" :command="{ type: \'DOWNLOAD\', data: scope.row }">下载</el-dropdown-item> </el-dropdown-menu> </el-dropdown> </template> </el-table-column> </table-pagination> </div> '},921:function(e,t,n){"use strict";t.a=function(e,t,n,a,i,r,o,s){var l,c="function"==typeof e?e.options:e;t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0);a&&(c.functional=!0);r&&(c._scopeId="data-v-"+r);o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i);if(l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}},932:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(933),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t.default=i.a},933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(945));t.default={name:"ElTablePagination",inheritAttrs:!1,props:a.default,data:function(){var e=this;return{pagination:{pageNo:1,pageSize:function(){var t=e.pageSizes;return t.length?t[0]:20}()},filtersArg:{},sorter:{},total:0,loading:!1,tableData:[],originTableData:[]}},watch:{data:function(e){this.rebuildInitData(e)}},methods:{handleSortChange:function(e){"local"===this.type?this.emitEventHandler("sort-change",e):(this.sorter=e,this.fetchHandler())},handleFilterChange:function(e){"local"===this.type?this.emitEventHandler("filter-change",e):(this.filtersArg=e,this.fetchHandler())},handleSizeChange:function(e){this.pagination.pageSize=e,this.dataChangeHandler()},handleCurrentChange:function(e){this.pagination.pageNo=e,this.dataChangeHandler()},dataChangeHandler:function(){var e=this.type;"local"===e?this.dataFilterHandler(arguments[0]):"remote"===e&&this.fetchHandler(arguments[0])},dataFilter:function(e){var t=this.pagination,n=t.pageNo,a=t.pageSize;return e.filter(function(e,t){return t>=(n-1)*a&&t<n*a})},dataFilterHandler:function(e){var t=this.originTableData;this.total=t.length,this.tableData=this.dataFilter(t)},fetchHandler:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.pagination,t=this.filtersArg,n=this.sorter;this.$emit("onchange",e,t,n)},emitEventHandler:function(e){this.$emit.apply(this,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(arguments).slice(1))))},rebuildInitData:function(e){var t=this.type;if(!e)throw this.showPagination=!1,new Error("When the type is 'local', you must set attribute 'data' and 'data' must be a array.");var n=JSON.parse(JSON.stringify(e.list||[]));this.originTableData=n;var a=e.page,i=e.pageSize,r=e.total;this.total=r,this.pagination.pageNo=a,this.pagination.pageSize=i,this.tableData="local"===t?this.dataFilter(n):e.list},emitTableData:function(){this.$emit("emit-table-data",this.tableData)},selectRows:function(e){var t=this;e&&e.length&&e.forEach(function(e){t.$refs.table.toggleRowSelection(e)})},clearAllSelectedRows:function(){this.$refs.table.clearSelection()}}}},939:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(943),i=n(932);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);var o=n(921),s=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);s.options.__file="app/components/table-pagination/index.vue",t.default=s.exports},943:function(e,t,n){"use strict";var a=n(944);n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return a.b})},944:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"table",staticClass:"el-table-input-wrapper",style:e.tableStyle,attrs:{"show-overflow-tooltip":e.showOverflowTooltip,stripe:e.stripe,data:e.tableData},on:{"sort-change":e.handleSortChange,"filter-change":e.handleFilterChange}},"el-table",e.$attrs,!1),e.$listeners),[e._t("default")],2),e._v(" "),e.showPagination?n("div",{staticClass:"el-pagination-wrapper",staticStyle:{"text-align":"right"}},[n("el-pagination",{attrs:{background:e.pageBackground,small:e.pageSmall,"hide-on-single-page":e.hideOnSinglePage,"current-page":e.pagination.pageNo,"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,layout:e.paginationLayout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)},i=[];a._withStripped=!0},945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={tableStyle:{type:String,default:""},type:{type:String,default:"remote",validator:function(e){var t=-1!==["remote","local"].indexOf(e);if(!t)throw new Error("Invalid type of '"+e+"', please set one type of 'remote' or 'local'.");return t}},data:{type:Object},onChange:{type:Function},showPagination:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},paginationLayout:{type:String,default:"total, prev, pager, next, jumper, sizes"},pageBackground:{type:Boolean,default:!0},pageSmall:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},stripe:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0}};t.default=a}});