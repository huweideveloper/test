webpackJsonp([62],{1501:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(1502),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},1502:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"SysNotice",inject:["sysNotice"],data:function(){return{visible:!1,content:""}},created:function(){if(this.sysNotice){var t=(this.sysNotice.children[0]||{}).remark,e=JSON.parse(t).content;e&&(this.content=e,this.visible=!0)}}}},1782:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(1783),i=a(1501);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a(1785);var o=a(921),r=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);r.options.__file="app/components/sys-notice/index.vue",e.default=r.exports},1783:function(t,e,a){"use strict";var n=a(1784);a.d(e,"a",function(){return n.a}),a.d(e,"b",function(){return n.b})},1784:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{appear:"",name:"slide"}},[t.visible?a("div",{staticClass:"sys-notice-container"},[a("i",{staticClass:"iconfont icon-bingzaotishi"}),t._v(" "),a("span",{staticClass:"content",attrs:{title:t.content}},[t._v(t._s(t.content))]),t._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.visible=!1}}})]):t._e()])},i=[];n._withStripped=!0},1785:function(t,e,a){"use strict";var n=a(1786);a.n(n)},1786:function(t,e,a){var n=a(1787);"string"==typeof n&&(n=[[t.i,n,""]]);var i={transform:void 0};a(705)(n,i);n.locals&&(t.exports=n.locals)},1787:function(t,e,a){(t.exports=a(704)(!1)).push([t.i,".slide-enter-active,\n.slide-leave-active {\n  transition: all 0.3s;\n}\n.slide-enter,\n.slide-leave-to {\n  transform: translate3d(100%, 0, 0);\n}\n.sys-notice-container {\n  height: 40px;\n  background-color: #FFFBE6;\n  border: 1px solid #FFE58F;\n  border-radius: 4px;\n  padding: 10px 10px 10px 16px;\n}\n.sys-notice-container .icon-bingzaotishi {\n  vertical-align: 4px;\n  font-size: 14px;\n  color: #FAAD14;\n}\n.sys-notice-container .content {\n  max-width: 1170px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  color: rgba(0, 0, 0, 0.65);\n}\n.sys-notice-container .el-icon-close {\n  float: right;\n  cursor: pointer;\n  padding-top: 2px;\n}\n",""])},1961:function(t,e,a){(t.exports=a(704)(!1)).push([t.i,".taskdetail .left {\n  width: 100%;\n  clear: both;\n  position: relative;\n}\n.taskdetail .left > .scroll {\n  overflow: hidden;\n}\n.taskdetail .left > .scroll .infoscorll {\n  overflow: hidden;\n  clear: both;\n}\n.taskdetail .left .breadcrumb {\n  font-size: 20px;\n  font-weight: bolder;\n  margin: 10px 0;\n}\n.taskdetail .left .breadcrumb .back {\n  transform: rotate(-90deg);\n  margin-right: 10px;\n}\n.taskdetail .left .basicinfo {\n  font-size: 14px;\n  position: relative;\n}\n.taskdetail .left .basicinfo .tasktitle {\n  font-size: 16px;\n  margin-bottom: 15px;\n}\n.taskdetail .left .btnall {\n  background: #4c9fa9;\n  color: #fff;\n  top: 20px;\n}\n.taskdetail .left .importalg {\n  top: 20px;\n  background: #4c9fa9;\n  color: #fff;\n}\n.taskdetail .left .algdone {\n  top: 70px;\n  border: 1px solid #4c9fa9;\n  color: #4c9fa9;\n}\n.taskdetail .left .biaozhubtn {\n  padding: 0 20px;\n  position: absolute;\n  right: 20px;\n  height: 36px;\n  font-size: 16px;\n  text-align: center;\n  line-height: 36px;\n  display: inline-block;\n  border-radius: 4px;\n}\n.taskdetail .left .disabled {\n  color: #c0c4cc;\n  border: 1px solid #ebeef5;\n  cursor: not-allowed;\n}\n.taskdetail .left .infoarea {\n  background: #fff;\n  padding: 20px 30px;\n}\n.taskdetail .left .infoarea p {\n  line-height: 45px;\n}\n.taskdetail .left .infoarea p span {\n  width: 48%;\n}\n.taskdetail .left .infoarea .fujian {\n  height: 80px;\n  line-height: 80px;\n}\n.taskdetail .left .series {\n  font-size: 14px;\n  margin-bottom: 10px;\n  margin-top: 10px;\n}\n.taskdetail .left .series .seriestitle {\n  font-size: 16px;\n  margin-bottom: 15px;\n}\n.taskdetail .left .series .filterarea {\n  padding-left: 20px;\n  margin-bottom: 10px;\n}\n.taskdetail .left .series .filterarea input {\n  height: 32px;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n  margin-right: 10px;\n}\n.taskdetail .left .series .seriestable {\n  background: #fff;\n}\n.taskdetail .right {\n  width: 20%;\n  float: right;\n  font-size: 18px;\n  font-weight: bold;\n  margin: 20px;\n}\n.taskdetail .right a {\n  width: 160px;\n  height: 40px;\n  line-height: 40px;\n  background: #4c9fa9;\n  color: #fff;\n}\n.taskdetail .right p {\n  margin: 20px 0 40px 0;\n}\n",""])},272:function(t,e,a){"use strict";var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(75),s=function(t){return t&&t.__esModule?t:{default:t}}(a(1782));function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(i,s){try{var o=e[i](s),r=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.pagesBase),n(e,[{key:"complete",value:function(){var t=this;this.action={viewmark:{dis:"inline",link:"noLink",content:"查看"}};var e=this.app;new Vue({el:"#taskDetail",components:{SysNotice:s.default},provide:{sysNotice:e.constmap.SYS_NOTICE}}),this.app.userResource[0].forEach(function(e){"personalaccount"==e.type&&(t.id=e.id)});var a=this.app.userResource[this.id];a&&a.length>0&&a.forEach(function(e){switch(e.type){case"EDIT":t.action.edit={dis:"inline",link:"noLink",content:"编辑"}}}),ES.selctorDoc("head title").html(this.app.languageMode.getTranslate(this.app.language,"index","mine")),this.app.header.showcrube(),this.dom.find(".back").on("click",function(){t.app.model.del("taskdetail"),t.app.changePage("personalaccount")}),this.styleModel(1),this.type="doctor",this.loadMoudel(),this.userInfo=JSON.parse(this.app.local.get("all")),this.dom.find(".series .search").on("click",function(){t.model.listInfo.serialNumber=t.dom.find('input[api="serialNumber"]').val(),t.listInfo()}),this.isPauseTask=!0}},{key:"setIsPauseTask",value:function(){var t=o(regeneratorRuntime.mark(function t(e){var a,n,i,s,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.app.loading.show(),t.next=3,this.api.project_anno_read({projectId:e});case 3:a=t.sent,this.app.loading.hide(),n=a.data||{},i=n.imageAnnotationList||[],s=i.some(function(t){return(t.toolList||[]).some(function(t){return["C_DAUBER","FREEHAND","POLYGON"].includes(t.type)})}),o=this.isFitTaskControlInfo(),r=!s||s&&o,this.isPauseTask=!r;case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"isFitTaskControlInfo",value:function(){var t=Tool.configobjformatremark(this.app.constmap.TASK_CONTROL),e=t.MIN_TASKID,a=t.WHITE_TASKID.split(","),n=Number(this.app.parpam.taskId);return n>e||a.includes(""+n)}},{key:"checkIsPause",value:function(){return this.isPauseTask&&i.MessageBox.alert("此任务暂停中","提示"),this.isPauseTask}},{key:"loadDataTask",value:function(){var t=o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.app.loading.show(),t.next=3,this.api.task_read({taskId:this.app.parpam.taskId,userId:JSON.parse(this.app.local.get("all")).userId});case 3:e=t.sent,this.setIsPauseTask(e.data.projectId),this.taskRead=e.data,this.app.loading.hide(),this.useinfo=JSON.parse(this.app.local.get("all")),this.projectId=e.data.projectId,this.model.listInfo.taskId=this.app.parpam.taskId,this.model.listInfo.userId=this.useinfo.userId,this.newList=!0,this.studyAnno=e.data.studyAnno,this.tasktype=e.data.type,2==e.data.type?e.data.algPreAnnotation="审核任务":(e.data.algPreAnnotation&&2==e.data.status&&(this.seriesTotalNum=e.data.seriesTotalNum,this.status=e.data.status),e.data.algPreAnnotation=e.data.algPreAnnotation?"算法标注":"人工标注"),this.setData(e.data),this.app.parpam.projectId&&this.app.model.get("taskdetail")?(this.model.setData("listInfo",this.app.model.get("taskdetail")),this.app.model.get("taskdetail").serialNumber&&this.dom.find('.filterarea input[api="serialNumber"]').val(this.app.model.get("taskdetail").serialNumber)):this.model.setData("listInfo",this.model.listInfo),"view"==this.app.parpam.type&&this.dom.find(".biaozhubtn").remove();case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"loadMoudel",value:function(){var t=this,e={icon:{serialNumber:{name:'<span data-name="序号">序号</span>',type:"text",w:"30%",ww:"30%"},imageAnnoNum:{name:'<span data-name="病灶数量">病灶数量</span>',type:"text",w:"10%",ww:"10%"},submitTime:{name:'<span data-name="提交时间">提交时间</span>',type:"text",w:"15%",ww:"15%"},auditStatus:{name:'<span data-name="审核状态">审核状态</span>',type:"text",w:"10%",ww:"10%"},annoUpdateStatus:{name:'<span data-name="标注是否更新">标注是否更新</span>',type:"text",w:"15%",ww:"15%"},annoLastUpdateTime:{name:'<span data-name="标注最后更新时间">标注最后更新时间</span>',type:"text",w:"15%",ww:"15%"},discarded:{name:'<span data-name="是否废片">是否废片</span>',type:"text",w:"10%",ww:"10%"}},actionulwidth:200};e.tablewidth=ES.selctorDoc(".taskdetail .series").box().clientWidth-210,e.type="center",e.actionicon={operation:{name:'<span data-i18n="action" data-name="操作">操作</span>',type:"action",code:"action",w:"100%",ww:"100%"}},a.e(85).then(function(){var n=a(952);t.table=t.app.loadModule(n,t.dom.find(".seriestable"),{id:"seriestable",header:e}),t.table.event._addEvent("table.action",function(e){if(!t.checkIsPause()){t.app.model.set("taskdetail",t.model.listInfo);var a=t.taskRead,n=a.type,i=a.clientType,s=a.seriesImgFileType,o=a.auditType,r=t.app.parpam.taskId;if("down"!==e.classname){var l="viewmark"!==e.classname;if(![1,2].includes(s)){var d=2===i&&[2,3,4,7,8].includes(o)?l?[3,4,7,8].includes(o)?15:11:[3,4,7,8].includes(o)?16:12:2===n&&2===i?8:l?4:2;return 2===i&&[1,5,6].includes(o)&&l&&(d=7),void Tool.goToC(t.app,{taskId:r,seriesImgFileType:s,type:d,serialNumber:e.id.split("$$")[0],projectId:t.projectId})}if(!l)if(2==t.tasktype){var p=t.largeFigure?"drapCanvasAud":"markauditview",c="view"==t.app.parpam.type?"check_viewer_taskdetail_view":"check_viewer_taskdetail";t.app.changePage(p,{taskId:r,taskInfo:e.id,type:c})}else{var u=t.largeFigure?"drapCanvasCheck":"markview";t.app.changePage(u,{taskId:r,projectId:t.projectId,type:"viewer",uid:JSON.parse(t.app.local.get("all")).userId,sid:e.id,rid:t.app.parpam.type})}if("edit"==e.classname){var f=t.largeFigure?"drapCanvasCheck":"doctorAudEdit";t.app.changePage(f,{taskId:r,projectId:t.projectId,type:"editor",uid:JSON.parse(t.app.local.get("all")).userId,sid:e.id,rid:t.app.parpam.type})}}else{var h=window.location.origin+"/aaa/v1/pdf/lung/nodules?taskId="+r+"&studyInstanceUid="+e.id+"&clearDicom=true";t.api.HttpRequest.downLoadFile(h,{key:"accessToken",val:t.app.local.get("accessToken")})}}}),t.table.event._addEvent("table.pagenumber",function(e){var a=t.model.listInfo;t.newList=!1,a.page=parseInt(e),t.model.setData("listInfo",a),t.table.changenum(a.page)}),t.table.event._addEvent("table.pagesize",function(e){var a=t.model.listInfo;a.page=1,a.pageSize=e.num,t.newList=!0,t.model.setData("listInfo",a)}),t.dom.find(".list-content").removeClass("hide"),t.loadDataTask()}.bind(null,a)).catch(a.oe)}},{key:"listInfo",value:function(){var t=o(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.table.showloading(),t.next=3,this.api.task_user_series_search(this.model.listInfo);case 3:e=t.sent,this.list(e.data),e.data.total>=this.seriesTotalNum&&2==this.status&&(this.dom.find(".algdone").removeClass("disabled"),this.dom.find(".algdone").on("click",function(){a.api.import_complete({taskId:1*a.app.parpam.taskId}).done(function(t){0==t.code?a.app.changePage("personalaccount"):Tool.errorshow(t.msg,a.app)})}));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setData",value:function(){var t=o(regeneratorRuntime.mark(function t(e){var a,n,i,s,o,r,l,d,p,c,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.dom.find(".infoarea label[data=name]").html(e.name),e.costVisible&&(this.dom.find(".cost").removeClass("hide"),this.dom.find(".infoarea label[data=cost]").html(e.cost)),this.dom.find(".infoarea label[data=taskId]").html(e.id),this.dom.find(".infoarea label[data=algPreAnnotation]").html(e.studyAnno?e.algPreAnnotation+"（以检查号为维度）":e.algPreAnnotation),this.dom.find(".infoarea label[data=startTime]").html(Tool.time(e.startTime,"yyyy-mm-dd")),this.dom.find(".infoarea label[data=seriesTotalNum]").html(e.seriesTotalNum),this.dom.find(".infoarea label[data=endTime]").html(Tool.time(e.endTime,"yyyy-mm-dd"));try{this.dom.find(".infoarea label[data=remark]").html(e.remark||"")}catch(t){console.log(t)}return this.app.loading.show(),t.next=11,this.api.project_basic_read({id:e.projectId});case 11:a=t.sent,n=a.data||{},i=n.type,s=n.clientType,o=n.largeFigure,r=n.isLungPdf,l=n.seriesImgFileType,d=n.name,p=n.remark,c=n.auditType,r&&(this.action.down={dis:"inline",link:"noLink",content:"下载"}),this.largeFigure=o,Object.assign(this.taskRead,{clientType:s,seriesImgFileType:l,auditType:c}),this.app.loading.hide(),this.dom.find('label[data="pname"]').html(d);try{this.dom.find(".proinfo label[data=pmark]").html(e.remark?p:"")}catch(t){console.log(t)}this.dom.find(".btnall").on("click",function(){if(!u.checkIsPause())if(1===l||2===l){if(2==e.type){var t=u.largeFigure?"drapCanvasAudEdit":"markaudit";return window.location.href=window.location.origin+"/#!/"+t+"/"+e.id+"/"+e.projectId+"/check",void window.location.reload()}var a=u.largeFigure?"drapCanvas":"mark";window.location.href=window.location.origin+"/#!/"+a+"/"+e.id+"/"+e.projectId+"/editor",window.location.reload()}else Tool.goToC(u.app,{taskId:e.id,seriesImgFileType:l,type:2===s&&[2,3,4,7,8].includes(c)?[3,4,7,8].includes(c)?14:10:2===i&&2===s?6:1})});case 20:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"list",value:function(t){var e=this,a=[];this.dom.find(".infoarea label[data=total]").html(t.total);var n=t.list;n&&n.length?(n.forEach(function(t){for(var n in t)t[n]=null==t[n]?"":t[n];t.id=t.serialNumber+(2==e.tasktype?"$$"+t.id+"$$"+t.userId:""),e.studyAnno&&(t.imageTotalNum=""),t.disabled=!1;var i={id:t.id,operation:JSON.parse(JSON.stringify(e.action))};if(2===e.taskRead.type&&e.useinfo.isAudit||![0,2].includes(t.auditStatus)||delete i.operation.edit,a.push(i),t.submitTime=t.submitTime?Tool.time(t.submitTime,"yyyy-mm-dd HH:MM:ss"):"无","number"==typeof t.auditStatus){t.auditStatus=["待审核","","审核通过","审核未通过"][t.auditStatus]}else t.auditStatus="";t.annoUpdateStatus="boolean"==typeof t.annoUpdateStatus?t.annoUpdateStatus?"是":"否":"",t.discarded="boolean"==typeof t.discarded?t.discarded?"是":"否":"",t.annoLastUpdateTime=t.annoLastUpdateTime?Tool.time(t.annoLastUpdateTime,"yyyy-mm-dd HH:MM:ss"):""}),setTimeout(function(){e.table.setData(n,a)},20)):this.table.noData(),this.newList&&(this.table.getTotal(t.pages,2,t.total),this.table.changenum(this.model.listInfo.page,this.model.listInfo.pageSize))}},{key:"getFileType",value:function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length).toLowerCase():""}}]),e}();t.exports=r},735:function(t,e,a){var n=a(1961);"string"==typeof n&&(n=[[t.i,n,""]]);var i={transform:void 0};a(705)(n,i);n.locals&&(t.exports=n.locals)},736:function(t,e,a){"use strict";var n="/task/user/read",i="/project/basic/read",s="/task/user/series/search",o="/alg/sar/import_complete",r="/project/anno/read",l={task_read:function(t){return this.HttpRequest.POST(n,t)},project_basic_read:function(t){return this.HttpRequest.POST(i,t)},task_user_series_search:function(t){return this.HttpRequest.POST(s,t)},import_complete:function(t){return this.HttpRequest.POST(o,t)},project_anno_read:function(t){return this.HttpRequest.POST(r,t)}};t.exports=l},737:function(t,e){t.exports='<div id=taskDetail class=taskdetail> <sys-notice></sys-notice> <div class=left> <div class=scroll> <div class=breadcrumb> <span class=back><i class="iconfont icon-icon-test3" style=font-size:12px></i></span><span>医生主页|任务详情</span> </div> <div class=infoscorll> <div> <div class=basicinfo> <div class=infoarea> <p> <span>任务名称：<label data=name></label></span> <span>任务序号：<label data=taskId></label></span> <span class="cost hide">标注单价：<label data=cost></label></span> </p> <p> <span>所属项目：<label data=pname></label></span> <span>任务类型：<label data=algPreAnnotation></label></span> </p> <p> <span>开始时间：<label data=startTime></label></span> <span>结束时间：<label data=endTime></label></span> </p> <p> <span>样本总量：<label data=seriesTotalNum></label></span> <span>已标注数量：<label data=total></label></span> </p> <p> <span style=width:auto>任务备注：<label data=remark></label></span> </p> </div> <a class="btnall biaozhubtn">开始任务</a> </div> <div class=series> <p class=seriestitle>序列(切片)跟进列表</p> <div class=filterarea> 序号：<input type=text api=serialNumber /> <a class="strokeBtn search">查询</a> </div> <div class=seriestable></div> </div> </div> </div> </div> </div> </div> '},738:function(t,e,a){"use strict";var n=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.___auto=!0,a.listInfo={taskId:"",userId:"",page:1,pageSize:10},a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.modelBase),e}();t.exports=n},921:function(t,e,a){"use strict";e.a=function(t,e,a,n,i,s,o,r){var l,d="function"==typeof t?t.options:t;e&&(d.render=e,d.staticRenderFns=a,d._compiled=!0);n&&(d.functional=!0);s&&(d._scopeId="data-v-"+s);o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=l):i&&(l=r?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i);if(l)if(d.functional){d._injectStyles=l;var p=d.render;d.render=function(t,e){return l.call(e),p(t,e)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:d}}}});