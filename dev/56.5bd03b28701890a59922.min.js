webpackJsonp([56],{1144:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1145),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e.default=r.a},1145:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{title:{type:String,default:""}},data:function(){return{isMore:!0}},methods:{handleClickMore:function(){this.isMore=!this.isMore}}}},1375:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1376),r=n(1144);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n(1378);var o=n(921),l=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);l.options.__file="app/components/filter-container/index.vue",e.default=l.exports},1376:function(t,e,n){"use strict";var a=n(1377);n.d(e,"a",function(){return a.a}),n.d(e,"b",function(){return a.b})},1377:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comp-filter-container"},[t.title?n("div",{staticClass:"title-wrapper"},[n("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),n("span",{class:"more "+(t.isMore?"":"unfold"),on:{click:t.handleClickMore}},[t._v(t._s(t.isMore?"收起":"展开"))])]):t._e(),t._v(" "),t.isMore?n("div",{staticClass:"content-wrapper"},[t._t("default")],2):t._e()])},r=[];a._withStripped=!0},1378:function(t,e,n){"use strict";var a=n(1379);n.n(a)},1379:function(t,e,n){var a=n(1380);"string"==typeof a&&(a=[[t.i,a,""]]);var r={transform:void 0};n(705)(a,r);a.locals&&(t.exports=a.locals)},1380:function(t,e,n){(t.exports=n(704)(!1)).push([t.i,".comp-filter-container {\n  background: #fff;\n  padding: 0px 10px;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  margin-top: -10px;\n}\n.comp-filter-container .title-wrapper .title {\n  font-size: 16px;\n  color: #333;\n}\n.comp-filter-container .title-wrapper .more {\n  float: right;\n  color: #999;\n  cursor: pointer;\n}\n.comp-filter-container .title-wrapper .more::after {\n  content: '';\n  display: inline-block;\n  height: 10px;\n  width: 10px;\n  border-width: 0 1px 1px 0;\n  border-color: #999;\n  border-style: solid;\n  transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0);\n  transform-origin: center;\n  transition: transform 0.3s;\n  margin-left: 8px;\n  vertical-align: top;\n}\n.comp-filter-container .title-wrapper .unfold:after {\n  transform-origin: center;\n  transform: rotate(-135deg);\n  transition: transform 0.3s;\n  vertical-align: middle;\n}\n.comp-filter-container .el-row {\n  display: flex;\n  align-items: center;\n}\n.comp-filter-container .el-input,\n.comp-filter-container .el-select,\n.comp-filter-container .el-cascader {\n  width: 95%;\n}\n.comp-filter-container .el-range-separator {\n  width: unset;\n}\n.comp-filter-container .el-form-item {\n  display: flex;\n  margin-bottom: 10px;\n}\n.comp-filter-container .el-form-item .el-form-item__content {\n  flex: 1;\n  margin-left: 0 !important;\n}\n.comp-filter-container .el-form-item .el-form-item__content .el-form-item {\n  margin-bottom: 0;\n  line-height: 34px;\n}\n.comp-filter-container .el-form-item-inline > .el-form-item__content {\n  font-size: 0;\n}\n.comp-filter-container .el-form-item-inline > .el-form-item__content .el-form-item {\n  display: inline-block;\n}\n.comp-filter-container .content-wrapper {\n  padding: 10px;\n}\n.comp-filter-container .el-button {\n  padding: 8px 20px;\n}\n",""])},2187:function(t,e,n){var a=n(2188);"string"==typeof a&&(a=[[t.i,a,""]]);var r={transform:void 0};n(705)(a,r);a.locals&&(t.exports=a.locals)},2188:function(t,e,n){(t.exports=n(704)(!1)).push([t.i,"",""])},340:function(t,e,n){"use strict";var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(2187);var o=c(n(712)),l=c(n(1375)),s=c(n(939));function c(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var o=e[r](i),l=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}var p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Interstellar.pagesBase),i(e,[{key:"complete",value:function(){var t=this;new Vue({el:"#nidusStatistics",components:{FilterContainer:l.default,TablePagination:s.default},data:function(){return{dateRange:[],nidusTotalCount:0,nidusCount1:0,nidusCount2:0,nidusList:{},page:1,pageSize:10}},computed:{startEndDate:function(){var t={},e=this.dateRange||[],n=r(e,2),a=n[0],i=n[1];return a&&i&&(t.startDate=a,t.endDate=i),t}},created:function(){var t=u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.categoryList={1:"放射科",2:"病理科"},this.orderObj={property:"volume",direction:1},this.queryData(),this.initDatePickerData();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initDatePickerData:function(){var t=function(t){var e=new Date;return e.setTime(e.getTime()-864e5*t),[e,new Date]};this.pickerOptions={shortcuts:[{text:"昨天",onClick:function(e){e.$emit("pick",t(1))}},{text:"最近三天",onClick:function(e){e.$emit("pick",t(3))}},{text:"最近一周",onClick:function(e){e.$emit("pick",t(7))}},{text:"最近一个月",onClick:function(e){e.$emit("pick",t(30))}},{text:"最近三个月",onClick:function(e){e.$emit("pick",t(90))}}]}},queryData:function(){this.page=1,this.queryNidusList(),this.queryOverallStatisticsData()},queryOverallStatisticsData:function(){var t=u(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.queryOverallStatisticsData(a({resultType:1},this.startEndDate));case 2:e=t.sent,this.nidusTotalCount=0,this.nidusCount1=0,this.nidusCount2=0,e.data.forEach(function(t){var e=t.category,a=t.number;1!==e&&2!==e||(n.nidusTotalCount+=a,n["nidusCount"+e]=a)});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),volumeFormatter:function(t,e){return t.volume||"无"},queryNidusList:function(){var t=u(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a({resultType:1,page:this.page,pageSize:this.pageSize},this.startEndDate,{order:this.orderObj}),t.next=3,o.default.queryNidusList(e);case 3:n=t.sent,this.nidusList=n.data;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onChange:function(t,e,n){var a=n.prop,r=n.order,i=t.pageNo,o=t.pageSize;this.page=i,this.pageSize=o,a&&r&&(this.orderObj={property:"imageAnnotationResultId"===a?"id":a,direction:"ascending"===r?0:1}),this.queryNidusList()},viewStatistics:function(e){var n=e.imageAnnotationResultId,a=e.seriesInstanceUid;if(!e.volume)return this.$message.warning("暂无病灶指标"),!1;t.app.changePage("ytjtaskstatistical",{sid:a,taskId:"0",nidusId:n})}}})}}]),e}();t.exports=p},712:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(65);e.default=(0,a.generateRequestFn)({queryOverallStatisticsData:"/anno/image_result/statistics/query",queryNidusList:"/anno/image_result/search"})},908:function(t,e){t.exports="<div id=nidusStatistics class=nidus-statistics-container> <filter-container> <el-row> <el-col :span=12> <el-date-picker v-model=dateRange type=daterange unlink-panels range-separator=至 start-placeholder=开始日期 end-placeholder=结束日期 :picker-options=pickerOptions :editable=false value-format=yyyy-MM-dd> </el-date-picker> </el-col> <el-col :span=12> <el-button type=primary size=medium @click=queryData>查询</el-button> </el-col> </el-row> </filter-container> <el-row style=\"margin:20px auto\"> <el-col :span=8>已标注mask病灶总数：{{nidusTotalCount}}</el-col> <el-col :span=8>放射科标注mask病灶总数：{{nidusCount1}}</el-col> <el-col :span=8>病理科标注mask病灶总数：{{nidusCount2}}</el-col> </el-row> <table-pagination :data=nidusList row-key=imageAnnotationResultId @onchange=onChange :default-sort=\"{prop: 'volume', order: 'descending'}\"> <el-table-column prop=imageAnnotationResultId label=序号 sortable=custom></el-table-column> <el-table-column prop=imageToolType label=影像工具></el-table-column> <el-table-column label=所属科室> <template slot-scope=scope>{{ categoryList[scope.row.projectCategory] }}</template> </el-table-column> <el-table-column prop=projectName label=所属项目></el-table-column> <el-table-column prop=taskName label=所属任务></el-table-column> <el-table-column prop=volume label=体积(mm³) :formatter=volumeFormatter sortable=custom></el-table-column> <el-table-column label=操作> <template slot-scope=scope> <a style=text-decoration:underline @click=viewStatistics(scope.row)>病灶数据统计</a> </template> </el-table-column> </table-pagination> </div> "},921:function(t,e,n){"use strict";e.a=function(t,e,n,a,r,i,o,l){var s,c="function"==typeof t?t.options:t;e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0);a&&(c.functional=!0);i&&(c._scopeId="data-v-"+i);o?(s=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=l?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r);if(s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(t,e){return s.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,s):[s]}return{exports:t,options:c}}},932:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(933),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e.default=r.a},933:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(945));e.default={name:"ElTablePagination",inheritAttrs:!1,props:a.default,data:function(){var t=this;return{pagination:{pageNo:1,pageSize:function(){var e=t.pageSizes;return e.length?e[0]:20}()},filtersArg:{},sorter:{},total:0,loading:!1,tableData:[],originTableData:[]}},watch:{data:function(t){this.rebuildInitData(t)}},methods:{handleSortChange:function(t){"local"===this.type?this.emitEventHandler("sort-change",t):(this.sorter=t,this.fetchHandler())},handleFilterChange:function(t){"local"===this.type?this.emitEventHandler("filter-change",t):(this.filtersArg=t,this.fetchHandler())},handleSizeChange:function(t){this.pagination.pageSize=t,this.dataChangeHandler()},handleCurrentChange:function(t){this.pagination.pageNo=t,this.dataChangeHandler()},dataChangeHandler:function(){var t=this.type;"local"===t?this.dataFilterHandler(arguments[0]):"remote"===t&&this.fetchHandler(arguments[0])},dataFilter:function(t){var e=this.pagination,n=e.pageNo,a=e.pageSize;return t.filter(function(t,e){return e>=(n-1)*a&&e<n*a})},dataFilterHandler:function(t){var e=this.originTableData;this.total=e.length,this.tableData=this.dataFilter(e)},fetchHandler:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.pagination,e=this.filtersArg,n=this.sorter;this.$emit("onchange",t,e,n)},emitEventHandler:function(t){this.$emit.apply(this,[t].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Array.from(arguments).slice(1))))},rebuildInitData:function(t){var e=this.type;if(!t)throw this.showPagination=!1,new Error("When the type is 'local', you must set attribute 'data' and 'data' must be a array.");var n=JSON.parse(JSON.stringify(t.list||[]));this.originTableData=n;var a=t.page,r=t.pageSize,i=t.total;this.total=i,this.pagination.pageNo=a,this.pagination.pageSize=r,this.tableData="local"===e?this.dataFilter(n):t.list},emitTableData:function(){this.$emit("emit-table-data",this.tableData)},selectRows:function(t){var e=this;t&&t.length&&t.forEach(function(t){e.$refs.table.toggleRowSelection(t)})},clearAllSelectedRows:function(){this.$refs.table.clearSelection()}}}},939:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(943),r=n(932);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var o=n(921),l=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);l.options.__file="app/components/table-pagination/index.vue",e.default=l.exports},943:function(t,e,n){"use strict";var a=n(944);n.d(e,"a",function(){return a.a}),n.d(e,"b",function(){return a.b})},944:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading.lock",value:t.loading,expression:"loading",modifiers:{lock:!0}}],ref:"table",staticClass:"el-table-input-wrapper",style:t.tableStyle,attrs:{"show-overflow-tooltip":t.showOverflowTooltip,stripe:t.stripe,data:t.tableData},on:{"sort-change":t.handleSortChange,"filter-change":t.handleFilterChange}},"el-table",t.$attrs,!1),t.$listeners),[t._t("default")],2),t._v(" "),t.showPagination?n("div",{staticClass:"el-pagination-wrapper",staticStyle:{"text-align":"right"}},[n("el-pagination",{attrs:{background:t.pageBackground,small:t.pageSmall,"hide-on-single-page":t.hideOnSinglePage,"current-page":t.pagination.pageNo,"page-sizes":t.pageSizes,"page-size":t.pagination.pageSize,layout:t.paginationLayout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)},r=[];a._withStripped=!0},945:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={tableStyle:{type:String,default:""},type:{type:String,default:"remote",validator:function(t){var e=-1!==["remote","local"].indexOf(t);if(!e)throw new Error("Invalid type of '"+t+"', please set one type of 'remote' or 'local'.");return e}},data:{type:Object},onChange:{type:Function},showPagination:{type:Boolean,default:!0},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},paginationLayout:{type:String,default:"total, prev, pager, next, jumper, sizes"},pageBackground:{type:Boolean,default:!0},pageSmall:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},stripe:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!0}};e.default=a}});